<html><head><title>menu.js</title><link rel="stylesheet" type="text/css" href="../resources/style.css" media="screen"/></head><body><h1>menu.js</h1><pre class="highlighted"><code><i>/*
Copyright (c) 2006, Yahoo! Inc. All rights reserved.
Code licensed under the BSD License:
http:<i>//developer.yahoo.com/yui/license.txt</i>
version: 0.12.0
*/</i>
<i>// holder</i>
<i>/**
* @module menu
* @description &lt;p&gt;The Menu Library features a collection of widgets that make
* it easy to add menus to your website or web application.  With the Menu
* Library you can create website fly-out menus, customized context menus, or
* application-style menu bars <b>with</b> just a small amount of scripting.&lt;/p&gt;
* &lt;ul&gt;
*    &lt;li&gt;Screen-reader accessibility.&lt;/li&gt;
*    &lt;li&gt;Keyboard and mouse navigation.&lt;/li&gt;
*    &lt;li&gt;A rich event model that provides access to all of a menu's
*    interesting moments.&lt;/li&gt;
*    &lt;li&gt;Support <b>for</b>
*    &lt;a href=&quot;http:<i>//en.wikipedia.org/wiki/Progressive_Enhancement&quot;&gt;Progressive</i>
*    Enhancement&lt;/a&gt;; Menus can be created from simple,
*    semantic markup on the page or purely through JavaScript.&lt;/li&gt;
* &lt;/ul&gt;
* @title Menu Library
* @namespace YAHOO.widget
* @requires Event, Dom, Container
*/</i>
(<b>function</b>() {

<b>var</b> Dom = YAHOO.util.Dom;
<b>var</b> Event = YAHOO.util.Event;

<i>/**
* Singleton that manages a collection of all menus and menu items.  Listens <b>for</b>
* DOM events at the document level and dispatches the events to the
* corresponding menu or menu item.
*
* @namespace YAHOO.widget
* @class MenuManager
* @static
*/</i>
YAHOO.widget.MenuManager = <b>new</b> function() {

    <i>// Private member variables</i>

    <i>// Flag indicating <b>if</b> the DOM event handlers have been attached</i>

    <b>var</b> m_bInitializedEventHandlers = false;

    <i>// Collection of menus</i>

    <b>var</b> m_oMenus = {};


    <i>//  Collection of menu items</i>

    <b>var</b> m_oItems = {};

    <i>// Collection of visible menus</i>

    <b>var</b> m_oVisibleMenus = {};

    <i>// Logger</i>


    <i>// Private methods</i>

    <i>/**
    * Adds an item to the collection of known menu items.
    * @private
    * @param {YAHOO.widget.MenuItem} p_oItem Object specifying the MenuItem
    * instance to be added.
    */</i>
    <b>var</b> addItem = <b>function</b>(p_oItem) {

        <b>var</b> sYUIId = Dom.generateId();

        <b>if</b>(p_oItem &amp;&amp; m_oItems[sYUIId] != p_oItem) {

            p_oItem.element.setAttribute(&quot;yuiid&quot;, sYUIId);

            m_oItems[sYUIId] = p_oItem;

            p_oItem.destroyEvent.subscribe(onItemDestroy, p_oItem);


        }

    };

    <i>/**
    * Removes an item from the collection of known menu items.
    * @private
    * @param {YAHOO.widget.MenuItem} p_oItem Object specifying the MenuItem
    * instance to be removed.
    */</i>
    <b>var</b> removeItem = <b>function</b>(p_oItem) {

        <b>var</b> sYUIId = p_oItem.element.getAttribute(&quot;yuiid&quot;);

        <b>if</b>(sYUIId &amp;&amp; m_oItems[sYUIId]) {

            <b>delete</b> m_oItems[sYUIId];


        }

    };

    <i>/**
    * Finds the root DIV node of a menu or the root LI node of a menu item.
    * @private
    * @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;} p_oElement Object specifying
    * an HTML element.
    */</i>
    <b>var</b> getMenuRootElement = <b>function</b>(p_oElement) {

        <b>var</b> oParentNode;

        <b>if</b>(p_oElement &amp;&amp; p_oElement.tagName) {

            <b>switch</b>(p_oElement.tagName.toUpperCase()) {

                <b>case</b> &quot;DIV&quot;:

                    oParentNode = p_oElement.parentNode;

                    <i>// Check <b>if</b> the DIV is the inner &quot;body&quot; node of a menu</i>

                    <b>if</b>(
                        Dom.hasClass(p_oElement, &quot;bd&quot;) &amp;&amp;
                        oParentNode &amp;&amp;
                        oParentNode.tagName &amp;&amp;
                        oParentNode.tagName.toUpperCase() == &quot;DIV&quot;
                    ) {

                        <b>return</b> oParentNode;

                    }
                    <b>else</b> {

                        <b>return</b> p_oElement;

                    }

                <b>break</b>;

                <b>case</b> &quot;LI&quot;:

                    <b>return</b> p_oElement;

                <b>default</b>:

                    oParentNode = p_oElement.parentNode;

                    <b>if</b>(oParentNode) {

                        <b>return</b> getMenuRootElement(oParentNode);

                    }

                <b>break</b>;

            }

        }

    };

    <i>// Private event handlers</i>

    <i>/**
    * Generic, global event handler <b>for</b> all of a menu's DOM-based
    * events.  This listens <b>for</b> events against the document object.  If the
    * target of a given event is a member of a menu or menu item's DOM, the
    * instance's corresponding Custom Event is fired.
    * @private
    * @param {Event} p_oEvent Object representing the DOM event object passed
    * back by the event utility (YAHOO.util.Event).
    */</i>
    <b>var</b> onDOMEvent = <b>function</b>(p_oEvent) {

        <i>// Get the target node of the DOM event</i>

        <b>var</b> oTarget = Event.getTarget(p_oEvent);

        <i>// See <b>if</b> the target of the event was a menu, or a menu item</i>

        <b>var</b> oElement = getMenuRootElement(oTarget);

        <b>var</b> oMenuItem;
        <b>var</b> oMenu;

        <b>if</b>(oElement) {

            <b>var</b> sTagName = oElement.tagName.toUpperCase();

            <b>if</b>(sTagName == &quot;LI&quot;) {

                <b>var</b> sYUIId = oElement.getAttribute(&quot;yuiid&quot;);

                <b>if</b>(sYUIId) {

                    oMenuItem = m_oItems[sYUIId];
                    oMenu = oMenuItem.parent;

                }

            }
            <b>else</b> if(sTagName == &quot;DIV&quot;) {

                <b>if</b>(oElement.id) {

                    oMenu = m_oMenus[oElement.id];

                }

            }

        }

        <b>if</b>(oMenu) {

            <i>// Map of DOM event names to CustomEvent names</i>

            <b>var</b> oEventTypes =  {
                    &quot;click&quot;: &quot;clickEvent&quot;,
                    &quot;mousedown&quot;: &quot;mouseDownEvent&quot;,
                    &quot;mouseup&quot;: &quot;mouseUpEvent&quot;,
                    &quot;mouseover&quot;: &quot;mouseOverEvent&quot;,
                    &quot;mouseout&quot;: &quot;mouseOutEvent&quot;,
                    &quot;keydown&quot;: &quot;keyDownEvent&quot;,
                    &quot;keyup&quot;: &quot;keyUpEvent&quot;,
                    &quot;keypress&quot;: &quot;keyPressEvent&quot;
                };

            <b>var</b> sCustomEventType = oEventTypes[p_oEvent.type];

            <i>// Fire the Custom Even that corresponds the current DOM event</i>

            <b>if</b>(oMenuItem &amp;&amp; !oMenuItem.cfg.getProperty(&quot;disabled&quot;)) {

                oMenuItem[sCustomEventType].fire(p_oEvent);

            }

            oMenu[sCustomEventType].fire(p_oEvent, oMenuItem);

        }
        <b>else</b> if(p_oEvent.type == &quot;mousedown&quot;) {

            <i>/*
                If the target of the event wasn't a menu, hide all
                dynamically positioned menus
            */</i>

            <b>var</b> oActiveItem;

            <b>for</b>(var i <b>in</b> m_oMenus) {

                <b>if</b>(m_oMenus.hasOwnProperty(i)) {

                    oMenu = m_oMenus[i];

                    <b>if</b>(
                        oMenu.cfg.getProperty(&quot;clicktohide&quot;) &amp;&amp;
                        oMenu.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;
                    ) {

                        oMenu.hide();

                    }
                    <b>else</b> {

                        oMenu.clearActiveItem(true);

                    }

                }

            }

        }

    };

    <i>/**
    * &quot;destroy&quot; event handler <b>for</b> a menu.
    * @private
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
    * fired the event.
    */</i>
    <b>var</b> onMenuDestroy = <b>function</b>(p_sType, p_aArgs, p_oMenu) {

        <b>this</b>.removeMenu(p_oMenu);

    };

    <i>/**
    * &quot;destroy&quot; event handler <b>for</b> a MenuItem instance.
    * @private
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    <b>var</b> onItemDestroy = <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> sYUIId = p_oItem.element.getAttribute(&quot;yuiid&quot;);

        <b>if</b>(sYUIId) {

            <b>delete</b> m_oItems[sYUIId];

        }

    };

    <i>/**
    * Event handler <b>for</b> when the &quot;visible&quot; configuration property
    * of a Menu instance changes.
    * @private
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
    * fired the event.
    */</i>
    <b>var</b> onMenuVisibleConfigChange = <b>function</b>(p_sType, p_aArgs, p_oMenu) {

        <b>var</b> bVisible = p_aArgs[0];

        <b>if</b>(bVisible) {

            m_oVisibleMenus[p_oMenu.id] = p_oMenu;


        }
        <b>else</b> if(m_oVisibleMenus[p_oMenu.id]) {

            <b>delete</b> m_oVisibleMenus[p_oMenu.id];


        }

    };

    <i>/**
    * &quot;itemadded&quot; event handler <b>for</b> a Menu instance.
    * @private
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    */</i>
    <b>var</b> onItemAdded = <b>function</b>(p_sType, p_aArgs) {

        addItem(p_aArgs[0]);

    };


    <i>/**
    * &quot;itemremoved&quot; event handler <b>for</b> a Menu instance.
    * @private
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    */</i>
    <b>var</b> onItemRemoved = <b>function</b>(p_sType, p_aArgs) {

        removeItem(p_aArgs[0]);

    };

    <i>// Privileged methods</i>

    <i>/**
    * @method addMenu
    * @description Adds a menu to the collection of known menus.
    * @param {YAHOO.widget.Menu} p_oMenu Object specifying the Menu instance
    * to be added.
    */</i>
    <b>this</b>.addMenu = <b>function</b>(p_oMenu) {

        <b>if</b>(p_oMenu &amp;&amp; p_oMenu.id &amp;&amp; !m_oMenus[p_oMenu.id]) {

            m_oMenus[p_oMenu.id] = p_oMenu;


            <b>if</b>(!m_bInitializedEventHandlers) {

                <b>var</b> oDoc = document;

                Event.addListener(oDoc, &quot;mouseover&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;mouseout&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;mousedown&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;mouseup&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;click&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;keydown&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;keyup&quot;, onDOMEvent, <b>this</b>, true);
                Event.addListener(oDoc, &quot;keypress&quot;, onDOMEvent, <b>this</b>, true);

                m_bInitializedEventHandlers = true;


            }

            p_oMenu.destroyEvent.subscribe(onMenuDestroy, p_oMenu, <b>this</b>);

            p_oMenu.cfg.subscribeToConfigEvent(
                &quot;visible&quot;,
                onMenuVisibleConfigChange,
                p_oMenu
            );

            p_oMenu.itemAddedEvent.subscribe(onItemAdded);
            p_oMenu.itemRemovedEvent.subscribe(onItemRemoved);


        }

    };

    <i>/**
    * @method removeMenu
    * @description Removes a menu from the collection of known menus.
    * @param {YAHOO.widget.Menu} p_oMenu Object specifying the Menu instance
    * to be removed.
    */</i>
    <b>this</b>.removeMenu = <b>function</b>(p_oMenu) {

        <b>if</b>(p_oMenu &amp;&amp; m_oMenus[p_oMenu.id]) {

            <b>delete</b> m_oMenus[p_oMenu.id];


        }

    };

    <i>/**
    * @method hideVisible
    * @description Hides all visible, dynamically positioned menus.
    */</i>
    <b>this</b>.hideVisible = <b>function</b>() {

        <b>var</b> oMenu;

        <b>for</b>(var i <b>in</b> m_oVisibleMenus) {

            <b>if</b>(m_oVisibleMenus.hasOwnProperty(i)) {

                oMenu = m_oVisibleMenus[i];

                <b>if</b>(oMenu.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

                    oMenu.hide();

                }

            }

        }

    };

    <i>/**
    * @method getMenus
    * @description Returns an array of all menus registered <b>with</b> the
    * menu manger.
    * @<b>return</b> {Array}
    */</i>
    <b>this</b>.getMenus = <b>function</b>() {

        <b>return</b> m_oMenus;

    };

    <i>/**
    * @method getMenu
    * @description Returns a menu <b>with</b> the specified id.
    * @param {String} p_sId String specifying the id of the menu to
    * be retrieved.
    * @<b>return</b> {YAHOO.widget.Menu}
    */</i>
    <b>this</b>.getMenu = <b>function</b>(p_sId) {

        <b>if</b>(m_oMenus[p_sId]) {

            <b>return</b> m_oMenus[p_sId];

        }

    };


    <i>/**
    * @method toString
    * @description Returns a string representing the menu manager.
    * @<b>return</b> {String}
    */</i>
    <b>this</b>.toString = <b>function</b>() {

        <b>return</b> (&quot;MenuManager&quot;);

    };

};

})();

(<b>function</b>() {

<b>var</b> Dom = YAHOO.util.Dom;
<b>var</b> Event = YAHOO.util.Event;

<i>/**
* The Menu class creates a container that holds a vertical list representing
* a set of options or commands.  Menu is the base class <b>for</b> all
* menu containers.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source
* <b>for</b> the menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
* level-one-html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
* level-one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement
* Object specifying the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as
* the data source <b>for</b> the menu.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu. See configuration class documentation <b>for</b>
* more details.
* @namespace YAHOO.widget
* @class Menu
* @constructor
* @extends YAHOO.widget.Overlay
*/</i>
YAHOO.widget.Menu = <b>function</b>(p_oElement, p_oConfig) {

    <b>if</b>(p_oConfig) {

        <b>this</b>.parent = p_oConfig.parent;

        <b>this</b>.lazyLoad = p_oConfig.lazyLoad || p_oConfig.lazyload;

        <b>this</b>.itemData = p_oConfig.itemData || p_oConfig.itemdata;

    }

    YAHOO.widget.Menu.superclass.constructor.call(
        <b>this</b>,
        p_oElement,
        p_oConfig
    );

};

YAHOO.extend(YAHOO.widget.Menu, YAHOO.widget.Overlay, {

<i>// Constants</i>

<i>/**
* @property CSS_CLASS_NAME
* @description String representing the CSS class(es) to be applied to the
* menu's &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element.
* @<b>default</b> &quot;yuimenu&quot;
* @final
* @type String
*/</i>
CSS_CLASS_NAME: &quot;yuimenu&quot;,

<i>/**
* @property ITEM_TYPE
* @description Object representing the type of menu item to instantiate and
* add when parsing the child nodes (either &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element,
* &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element or &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt;)
* of the menu's source HTML element.
* @<b>default</b> YAHOO.widget.MenuItem
* @final
* @type YAHOO.widget.MenuItem
*/</i>
ITEM_TYPE: null,

<i>/**
* @property GROUP_TITLE_TAG_NAME
* @description String representing the tagname of the HTML element used to
* title the menu's item groups.
* @<b>default</b> H6
* @final
* @type String
*/</i>
GROUP_TITLE_TAG_NAME: &quot;h6&quot;,

<i>// Private properties</i>

<i>/**
* @property _nHideDelayId
* @description Number representing the time-out setting used to cancel the
* hiding of a menu.
* @<b>default</b> null
* @private
* @type Number
*/</i>
_nHideDelayId: null,

<i>/**
* @property _nShowDelayId
* @description Number representing the time-out setting used to cancel the
* showing of a menu.
* @<b>default</b> null
* @private
* @type Number
*/</i>
_nShowDelayId: null,

<i>/**
* @property _hideDelayEventHandlersAssigned
* @description Boolean indicating <b>if</b> the &quot;mouseover&quot; and &quot;mouseout&quot; event
* handlers used <b>for</b> hiding the menu via a call to &quot;window.setTimeout&quot; have
* already been assigned.
* @<b>default</b> false
* @private
* @type Boolean
*/</i>
_hideDelayEventHandlersAssigned: false,

<i>/**
* @property _bHandledMouseOverEvent
* @description Boolean indicating the current state of the menu's
* &quot;mouseover&quot; event.
* @<b>default</b> false
* @private
* @type Boolean
*/</i>
_bHandledMouseOverEvent: false,

<i>/**
* @property _bHandledMouseOutEvent
* @description Boolean indicating the current state of the menu's
* &quot;mouseout&quot; event.
* @<b>default</b> false
* @private
* @type Boolean
*/</i>
_bHandledMouseOutEvent: false,

<i>/**
* @property _aGroupTitleElements
* @description Array of HTML element used to title groups of menu items.
* @<b>default</b> []
* @private
* @type Array
*/</i>
_aGroupTitleElements: null,

<i>/**
* @property _aItemGroups
* @description Array of menu items.
* @<b>default</b> []
* @private
* @type Array
*/</i>
_aItemGroups: null,

<i>/**
* @property _aListElements
* @description Array of &lt;code&gt;&amp;#60;ul&amp;#62;&lt;/code&gt; elements, each of which is
* the parent node <b>for</b> each item's &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element.
* @<b>default</b> []
* @private
* @type Array
*/</i>
_aListElements: null,

<i>// Public properties</i>

<i>/**
* @property lazyLoad
* @description Boolean indicating <b>if</b> the menu's &quot;lazy load&quot; feature is
* enabled.  If set to &quot;true,&quot; initialization and rendering of the menu's
* items will be deferred until the first time it is made visible.  This
* property should be set via the constructor using the configuration
* object literal.
* @<b>default</b> false
* @type Boolean
*/</i>
lazyLoad: false,

<i>/**
* @property itemData
* @description Array of items to be added to the menu.  The array can contain
* strings representing the text <b>for</b> each item to be created, object literals
* representing the menu item configuration properties, or MenuItem instances.
* This property should be set via the constructor using the configuration
* object literal.
* @<b>default</b> null
* @type Array
*/</i>
itemData: null,

<i>/**
* @property activeItem
* @description Object reference to the item <b>in</b> the menu that has focus.
* @<b>default</b> null
* @type YAHOO.widget.MenuItem
*/</i>
activeItem: null,

<i>/**
* @property parent
* @description Object reference to the menu's parent menu or menu item.
* This property can be set via the constructor using the configuration
* object literal.
* @<b>default</b> null
* @type YAHOO.widget.MenuItem
*/</i>
parent: null,

<i>/**
* @property srcElement
* @description Object reference to the HTML element (either
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; or &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt;) used to
* create the menu.
* @<b>default</b> null
* @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
* level-one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;|&lt;a
* href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-html.</i>
* html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;
*/</i>
srcElement: null,

<i>// Events</i>

<i>/**
* @event mouseOverEvent
* @description Fires when the mouse has entered the menu.  Passes back
* the DOM Event object as an argument.
*/</i>
mouseOverEvent: null,

<i>/**
* @event mouseOutEvent
* @description Fires when the mouse has left the menu.  Passes back the DOM
* Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
mouseOutEvent: null,

<i>/**
* @event mouseDownEvent
* @description Fires when the user mouses down on the menu.  Passes back the
* DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
mouseDownEvent: null,

<i>/**
* @event mouseUpEvent
* @description Fires when the user releases a mouse button <b>while</b> the mouse is
* over the menu.  Passes back the DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
mouseUpEvent: null,

<i>/**
* @event clickEvent
* @description Fires when the user clicks the on the menu.  Passes back the
* DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
clickEvent: null,

<i>/**
* @event keyPressEvent
* @description Fires when the user presses an alphanumeric key when one of the
* menu's items has focus.  Passes back the DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
keyPressEvent: null,

<i>/**
* @event keyDownEvent
* @description Fires when the user presses a key when one of the menu's items
* has focus.  Passes back the DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
keyDownEvent: null,

<i>/**
* @event keyUpEvent
* @description Fires when the user releases a key when one of the menu's items
* has focus.  Passes back the DOM Event object as an argument.
* @type YAHOO.util.CustomEvent
*/</i>
keyUpEvent: null,

<i>/**
* @event itemAddedEvent
* @description Fires when an item is added to the menu.
* @type YAHOO.util.CustomEvent
*/</i>
itemAddedEvent: null,

<i>/**
* @event itemRemovedEvent
* @description Fires when an item is removed to the menu.
* @type YAHOO.util.CustomEvent
*/</i>
itemRemovedEvent: null,

<i>/**
* @method init
* @description The Menu class's initialization method. This method is
* automatically called by the constructor, and sets up all DOM references
* <b>for</b> pre-existing markup, and creates required markup <b>if</b> it is not
* already present.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source
* <b>for</b> the menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
* level-one-html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
* level-one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement
* Object specifying the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as
* the data source <b>for</b> the menu.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu. See configuration class documentation <b>for</b>
* more details.
*/</i>
init: <b>function</b>(p_oElement, p_oConfig) {

    <b>this</b>._aItemGroups = [];
    <b>this</b>._aListElements = [];
    <b>this</b>._aGroupTitleElements = [];

    <b>if</b>(!<b>this</b>.ITEM_TYPE) {

        <b>this</b>.ITEM_TYPE = YAHOO.widget.MenuItem;

    }

    <b>var</b> oElement;

    <b>if</b>(typeof p_oElement == &quot;string&quot;) {

        oElement = document.getElementById(p_oElement);

    }
    <b>else</b> if(p_oElement.tagName) {

        oElement = p_oElement;

    }

    <b>if</b>(oElement &amp;&amp; oElement.tagName) {

        <b>switch</b>(oElement.tagName.toUpperCase()) {

            <b>case</b> &quot;DIV&quot;:

                <b>this</b>.srcElement = oElement;

                <b>if</b>(!oElement.id) {

                    oElement.setAttribute(&quot;id&quot;, Dom.generateId());

                }

                <i>/*
                    Note: we don't pass the user config <b>in</b> here yet
                    because we only want it executed once, at the lowest
                    subclass level.
                */</i>

                YAHOO.widget.Menu.superclass.init.call(<b>this</b>, oElement);

                <b>this</b>.beforeInitEvent.fire(YAHOO.widget.Menu);


            <b>break</b>;

            <b>case</b> &quot;SELECT&quot;:

                <b>this</b>.srcElement = oElement;


                <i>/*
                    The source element is not something that we can use
                    outright, so we need to create a <b>new</b> Overlay

                    Note: we don't pass the user config <b>in</b> here yet
                    because we only want it executed once, at the lowest
                    subclass level.
                */</i>

                YAHOO.widget.Menu.superclass.init.call(<b>this</b>, Dom.generateId());

                <b>this</b>.beforeInitEvent.fire(YAHOO.widget.Menu);

            <b>break</b>;

        }

    }
    <b>else</b> {

        <i>/*
            Note: we don't pass the user config <b>in</b> here yet
            because we only want it executed once, at the lowest
            subclass level.
        */</i>

        YAHOO.widget.Menu.superclass.init.call(<b>this</b>, p_oElement);

        <b>this</b>.beforeInitEvent.fire(YAHOO.widget.Menu);

    }

    <b>if</b>(this.element) {

        <b>var</b> oEl = <b>this</b>.element;

        Dom.addClass(oEl, <b>this</b>.CSS_CLASS_NAME);

        <i>// Subscribe to Custom Events</i>

        <b>this</b>.initEvent.subscribe(<b>this</b>._onInit, <b>this</b>, true);
        <b>this</b>.beforeRenderEvent.subscribe(<b>this</b>._onBeforeRender, <b>this</b>, true);
        <b>this</b>.renderEvent.subscribe(<b>this</b>._onRender, <b>this</b>, true);
        <b>this</b>.beforeShowEvent.subscribe(<b>this</b>._onBeforeShow, <b>this</b>, true);
        <b>this</b>.showEvent.subscribe(<b>this</b>._onShow, <b>this</b>, true);
        <b>this</b>.beforeHideEvent.subscribe(<b>this</b>._onBeforeHide, <b>this</b>, true);
        <b>this</b>.mouseOverEvent.subscribe(<b>this</b>._onMouseOver, <b>this</b>, true);
        <b>this</b>.mouseOutEvent.subscribe(<b>this</b>._onMouseOut, <b>this</b>, true);
        <b>this</b>.clickEvent.subscribe(<b>this</b>._onClick, <b>this</b>, true);
        <b>this</b>.keyDownEvent.subscribe(<b>this</b>._onKeyDown, <b>this</b>, true);

        <b>if</b>(p_oConfig) {

            <b>this</b>.cfg.applyConfig(p_oConfig, true);

        }

        <i>// Register the Menu instance <b>with</b> the MenuManager</i>

        YAHOO.widget.MenuManager.addMenu(<b>this</b>);


        <b>this</b>.initEvent.fire(YAHOO.widget.Menu);

    }

},

<i>// Private methods</i>

<i>/**
* @method _initSubTree
* @description Iterates the childNodes of the source element to find nodes
* used to instantiate menu and menu items.
* @private
*/</i>
_initSubTree: <b>function</b>() {

    <b>var</b> oNode;

    <b>if</b>(this.srcElement.tagName == &quot;DIV&quot;) {

        <i>/*
            Populate the collection of item groups and item
            group titles
        */</i>

        oNode = <b>this</b>.body.firstChild;

        <b>var</b> nGroup = 0;
        <b>var</b> sGroupTitleTagName = <b>this</b>.GROUP_TITLE_TAG_NAME.toUpperCase();

        <b>do</b> {

            <b>if</b>(oNode &amp;&amp; oNode.tagName) {

                <b>switch</b>(oNode.tagName.toUpperCase()) {

                    <b>case</b> sGroupTitleTagName:

                        <b>this</b>._aGroupTitleElements[nGroup] = oNode;

                    <b>break</b>;

                    <b>case</b> &quot;UL&quot;:

                        <b>this</b>._aListElements[nGroup] = oNode;
                        <b>this</b>._aItemGroups[nGroup] = [];
                        nGroup++;

                    <b>break</b>;

                }

            }

        }
        <b>while</b>((oNode = oNode.nextSibling));

        <i>/*
            Apply the &quot;first-of-type&quot; class to the first UL to mimic
            the &quot;first-of-type&quot; CSS3 psuedo class.
        */</i>

        <b>if</b>(this._aListElements[0]) {

            Dom.addClass(<b>this</b>._aListElements[0], &quot;first-of-type&quot;);

        }

    }

    oNode = null;

    <b>if</b>(this.srcElement.tagName) {

        <b>switch</b>(this.srcElement.tagName.toUpperCase()) {

            <b>case</b> &quot;DIV&quot;:

                <b>if</b>(this._aListElements.length &gt; 0) {


                    <b>var</b> i = <b>this</b>._aListElements.length - 1;

                    <b>do</b> {

                        oNode = <b>this</b>._aListElements[i].firstChild;


                        <b>do</b> {

                            <b>if</b>(oNode &amp;&amp; oNode.tagName) {

                                <b>switch</b>(oNode.tagName.toUpperCase()) {

                                    <b>case</b> &quot;LI&quot;:


                                        <b>this</b>.addItem(
                                                <b>new</b> this.ITEM_TYPE(
                                                    oNode,
                                                    { parent: <b>this</b> }
                                                ),
                                                i
                                            );

                                    <b>break</b>;

                                }

                            }

                        }
                        <b>while</b>((oNode = oNode.nextSibling));

                    }
                    <b>while</b>(i--);

                }

            <b>break</b>;

            <b>case</b> &quot;SELECT&quot;:


                oNode = <b>this</b>.srcElement.firstChild;

                <b>do</b> {

                    <b>if</b>(oNode &amp;&amp; oNode.tagName) {

                        <b>switch</b>(oNode.tagName.toUpperCase()) {

                            <b>case</b> &quot;OPTGROUP&quot;:
                            <b>case</b> &quot;OPTION&quot;:


                                <b>this</b>.addItem(
                                        <b>new</b> this.ITEM_TYPE(
                                                oNode,
                                                { parent: <b>this</b> }
                                            )
                                        );

                            <b>break</b>;

                        }

                    }

                }
                <b>while</b>((oNode = oNode.nextSibling));

            <b>break</b>;

        }

    }

},

<i>/**
* @method _getFirstEnabledItem
* @description Returns the first enabled item <b>in</b> the menu.
* @<b>return</b> {YAHOO.widget.MenuItem}
* @private
*/</i>
_getFirstEnabledItem: <b>function</b>() {

    <b>var</b> nGroups = <b>this</b>._aItemGroups.length;
    <b>var</b> oItem;
    <b>var</b> aItemGroup;

    <b>for</b>(var i=0; i&lt;nGroups; i++) {

        aItemGroup = <b>this</b>._aItemGroups[i];

        <b>if</b>(aItemGroup) {

            <b>var</b> nItems = aItemGroup.length;

            <b>for</b>(var n=0; n&lt;nItems; n++) {

                oItem = aItemGroup[n];

                <b>if</b>(
                    !oItem.cfg.getProperty(&quot;disabled&quot;) &amp;&amp;
                    oItem.element.style.display != &quot;none&quot;
                ) {

                    <b>return</b> oItem;

                }

                oItem = null;

            }

        }

    }

},

<i>/**
* @method _checkPosition
* @description Checks to make sure that the value of the &quot;position&quot; property
* is one of the supported strings. Returns true <b>if</b> the position is supported.
* @private
* @param {Object} p_sPosition String specifying the position of the menu.
* @<b>return</b> {Boolean}
*/</i>
_checkPosition: <b>function</b>(p_sPosition) {

    <b>if</b>(typeof p_sPosition == &quot;string&quot;) {

        <b>var</b> sPosition = p_sPosition.toLowerCase();

        <b>return</b> (&quot;dynamic,static&quot;.indexOf(sPosition) != -1);

    }

},

<i>/**
* @method _addItemToGroup
* @description Adds a menu item to a group.
* @private
* @param {Number} p_nGroupIndex Number indicating the group to which the
* item belongs.
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance to be added to the menu.
* @param {String} p_oItem String specifying the text of the item to be added
* to the menu.
* @param {Object} p_oItem Object literal containing a set of menu item
* configuration properties.
* @param {Number} p_nItemIndex Optional. Number indicating the index at
* which the menu item should be added.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
_addItemToGroup: <b>function</b>(p_nGroupIndex, p_oItem, p_nItemIndex) {

    <b>var</b> oItem;

    <b>if</b>(p_oItem instanceof <b>this</b>.ITEM_TYPE) {

        oItem = p_oItem;
        oItem.parent = <b>this</b>;

    }
    <b>else</b> if(<b>typeof</b> p_oItem == &quot;string&quot;) {

        oItem = <b>new</b> this.ITEM_TYPE(p_oItem, { parent: <b>this</b> });

    }
    <b>else</b> if(<b>typeof</b> p_oItem == &quot;object&quot; &amp;&amp; p_oItem.text) {

        <b>var</b> sText = p_oItem.text;

        <b>delete</b> p_oItem[&quot;text&quot;];

        p_oItem.parent = <b>this</b>;

        oItem = <b>new</b> this.ITEM_TYPE(sText, p_oItem);

    }

    <b>if</b>(oItem) {

        <b>var</b> nGroupIndex = <b>typeof</b> p_nGroupIndex == &quot;number&quot; ? p_nGroupIndex : 0;

        <b>var</b> aGroup = <b>this</b>._getItemGroup(nGroupIndex);

        <b>var</b> oGroupItem;

        <b>if</b>(!aGroup) {

            aGroup = <b>this</b>._createItemGroup(nGroupIndex);

        }

        <b>if</b>(typeof p_nItemIndex == &quot;number&quot;) {

            <b>var</b> bAppend = (p_nItemIndex &gt;= aGroup.length);

            <b>if</b>(aGroup[p_nItemIndex]) {

                aGroup.splice(p_nItemIndex, 0, oItem);

            }
            <b>else</b> {

                aGroup[p_nItemIndex] = oItem;

            }

            oGroupItem = aGroup[p_nItemIndex];

            <b>if</b>(oGroupItem) {

                <b>if</b>(
                    bAppend &amp;&amp;
                    (
                        !oGroupItem.element.parentNode ||
                        oGroupItem.element.parentNode.nodeType == 11
                    )
                ) {

                    <b>this</b>._aListElements[nGroupIndex].appendChild(
                        oGroupItem.element
                    );

                }
                <b>else</b> {


                    <i>/**
                    * Returns the next sibling of an item <b>in</b> an array.
                    * @private
                    * @param {p_aArray} Array to search.
                    * @param {p_nStartIndex} Number indicating the index to
                    * start searching the array.
                    * @<b>return</b> {Object}
                    */</i>
                    <b>var</b> getNextItemSibling =

                        <b>function</b>(p_aArray, p_nStartIndex) {

                            <b>return</b> (
                                    p_aArray[p_nStartIndex] ||
                                    getNextItemSibling(
                                        p_aArray,
                                        (p_nStartIndex+1)
                                    )
                                );

                        };


                    <b>var</b> oNextItemSibling =
                            getNextItemSibling(aGroup, (p_nItemIndex+1));

                    <b>if</b>(
                        oNextItemSibling &amp;&amp;
                        (
                            !oGroupItem.element.parentNode ||
                            oGroupItem.element.parentNode.nodeType == 11
                        )
                    ) {

                        <b>this</b>._aListElements[nGroupIndex].insertBefore(
                                oGroupItem.element,
                                oNextItemSibling.element
                            );

                    }

                }


                oGroupItem.parent = <b>this</b>;

                <b>this</b>._subscribeToItemEvents(oGroupItem);

                <b>this</b>._configureSubmenu(oGroupItem);

                <b>this</b>._updateItemProperties(nGroupIndex);


                <b>this</b>.itemAddedEvent.fire(oGroupItem);

                <b>return</b> oGroupItem;

            }

        }
        <b>else</b> {

            <b>var</b> nItemIndex = aGroup.length;

            aGroup[nItemIndex] = oItem;

            oGroupItem = aGroup[nItemIndex];


            <b>if</b>(oGroupItem) {

                <b>if</b>(
                    !Dom.isAncestor(
                        <b>this</b>._aListElements[nGroupIndex],
                        oGroupItem.element
                    )
                ) {

                    <b>this</b>._aListElements[nGroupIndex].appendChild(
                        oGroupItem.element
                    );

                }

                oGroupItem.element.setAttribute(&quot;groupindex&quot;, nGroupIndex);
                oGroupItem.element.setAttribute(&quot;index&quot;, nItemIndex);

                oGroupItem.parent = <b>this</b>;

                oGroupItem.index = nItemIndex;
                oGroupItem.groupIndex = nGroupIndex;

                <b>this</b>._subscribeToItemEvents(oGroupItem);

                <b>this</b>._configureSubmenu(oGroupItem);

                <b>if</b>(nItemIndex === 0) {

                    Dom.addClass(oGroupItem.element, &quot;first-of-type&quot;);

                }



                <b>this</b>.itemAddedEvent.fire(oGroupItem);

                <b>return</b> oGroupItem;

            }

        }

    }

},

<i>/**
* @method _removeItemFromGroupByIndex
* @description Removes a menu item from a group by index.  Returns the menu
* item that was removed.
* @private
* @param {Number} p_nGroupIndex Number indicating the group to which the menu
* item belongs.
* @param {Number} p_nItemIndex Number indicating the index of the menu item
* to be removed.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
_removeItemFromGroupByIndex: <b>function</b>(p_nGroupIndex, p_nItemIndex) {

    <b>var</b> nGroupIndex = <b>typeof</b> p_nGroupIndex == &quot;number&quot; ? p_nGroupIndex : 0;
    <b>var</b> aGroup = <b>this</b>._getItemGroup(nGroupIndex);

    <b>if</b>(aGroup) {

        <b>var</b> aArray = aGroup.splice(p_nItemIndex, 1);
        <b>var</b> oItem = aArray[0];

        <b>if</b>(oItem) {

            <i>// Update the index and className properties of each member</i>

            <b>this</b>._updateItemProperties(nGroupIndex);

            <b>if</b>(aGroup.length === 0) {

                <i>// Remove the UL</i>

                <b>var</b> oUL = <b>this</b>._aListElements[nGroupIndex];

                <b>if</b>(this.body &amp;&amp; oUL) {

                    <b>this</b>.body.removeChild(oUL);

                }

                <i>// Remove the group from the array of items</i>

                <b>this</b>._aItemGroups.splice(nGroupIndex, 1);


                <i>// Remove the UL from the array of ULs</i>

                <b>this</b>._aListElements.splice(nGroupIndex, 1);


                <i>/*
                     Assign the &quot;first-of-type&quot; class to the <b>new</b> first UL
                     <b>in</b> the collection
                */</i>

                oUL = <b>this</b>._aListElements[0];

                <b>if</b>(oUL) {

                    Dom.addClass(oUL, &quot;first-of-type&quot;);

                }

            }


            <b>this</b>.itemRemovedEvent.fire(oItem);

            <i>// Return a reference to the item that was removed</i>

            <b>return</b> oItem;

        }

    }

},

<i>/**
* @method _removeItemFromGroupByValue
* @description Removes a menu item from a group by reference.  Returns the
* menu item that was removed.
* @private
* @param {Number} p_nGroupIndex Number indicating the group to which the
* menu item belongs.
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance to be removed.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
_removeItemFromGroupByValue: <b>function</b>(p_nGroupIndex, p_oItem) {

    <b>var</b> aGroup = <b>this</b>._getItemGroup(p_nGroupIndex);

    <b>if</b>(aGroup) {

        <b>var</b> nItems = aGroup.length;
        <b>var</b> nItemIndex = -1;

        <b>if</b>(nItems &gt; 0) {

            <b>var</b> i = nItems-1;

            <b>do</b> {

                <b>if</b>(aGroup[i] == p_oItem) {

                    nItemIndex = i;
                    <b>break</b>;

                }

            }
            <b>while</b>(i--);

            <b>if</b>(nItemIndex &gt; -1) {

                <b>return</b> this._removeItemFromGroupByIndex(
                            p_nGroupIndex,
                            nItemIndex
                        );

            }

        }

    }

},

<i>/**
* @method _updateItemProperties
* @description Updates the &quot;index,&quot; &quot;groupindex,&quot; and &quot;className&quot; properties
* of the menu items <b>in</b> the specified group.
* @private
* @param {Number} p_nGroupIndex Number indicating the group of items to update.
*/</i>
_updateItemProperties: <b>function</b>(p_nGroupIndex) {

    <b>var</b> aGroup = <b>this</b>._getItemGroup(p_nGroupIndex);
    <b>var</b> nItems = aGroup.length;

    <b>if</b>(nItems &gt; 0) {

        <b>var</b> i = nItems - 1;
        <b>var</b> oItem;
        <b>var</b> oLI;

        <i>// Update the index and className properties of each member</i>

        <b>do</b> {

            oItem = aGroup[i];

            <b>if</b>(oItem) {

                oLI = oItem.element;

                oItem.index = i;
                oItem.groupIndex = p_nGroupIndex;

                oLI.setAttribute(&quot;groupindex&quot;, p_nGroupIndex);
                oLI.setAttribute(&quot;index&quot;, i);

                Dom.removeClass(oLI, &quot;first-of-type&quot;);

            }

        }
        <b>while</b>(i--);

        <b>if</b>(oLI) {

            Dom.addClass(oLI, &quot;first-of-type&quot;);

        }

    }

},

<i>/**
* @method _createItemGroup
* @description Creates a <b>new</b> menu item group (array) and its associated
* &lt;code&gt;&amp;#60;ul&amp;#62;&lt;/code&gt; element. Returns an aray of menu item groups.
* @private
* @param {Number} p_nIndex Number indicating the group to create.
* @<b>return</b> {Array}
*/</i>
_createItemGroup: <b>function</b>(p_nIndex) {

    <b>if</b>(!<b>this</b>._aItemGroups[p_nIndex]) {

        <b>this</b>._aItemGroups[p_nIndex] = [];

        <b>var</b> oUL = document.createElement(&quot;ul&quot;);

        <b>this</b>._aListElements[p_nIndex] = oUL;

        <b>return</b> this._aItemGroups[p_nIndex];

    }

},

<i>/**
* @method _getItemGroup
* @description Returns the menu item group at the specified index.
* @private
* @param {Number} p_nIndex Number indicating the index of the menu item group
* to be retrieved.
* @<b>return</b> {Array}
*/</i>
_getItemGroup: <b>function</b>(p_nIndex) {

    <b>var</b> nIndex = ((<b>typeof</b> p_nIndex == &quot;number&quot;) ? p_nIndex : 0);

    <b>return</b> this._aItemGroups[nIndex];

},

<i>/**
* @method _configureSubmenu
* @description Subscribes the menu item's submenu to its parent menu's events.
* @private
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance <b>with</b> the submenu to be configured.
*/</i>
_configureSubmenu: <b>function</b>(p_oItem) {

    <b>var</b> oSubmenu = p_oItem.cfg.getProperty(&quot;submenu&quot;);

    <b>if</b>(oSubmenu) {

        <i>/*
            Listen <b>for</b> configuration changes to the parent menu
            so they they can be applied to the submenu.
        */</i>

        <b>this</b>.cfg.configChangedEvent.subscribe(
                <b>this</b>._onParentMenuConfigChange,
                oSubmenu,
                true
            );

        <b>this</b>.renderEvent.subscribe(
                <b>this</b>._onParentMenuRender,
                oSubmenu,
                true
            );

        oSubmenu.beforeShowEvent.subscribe(
                <b>this</b>._onSubmenuBeforeShow,
                oSubmenu,
                true
            );

        oSubmenu.showEvent.subscribe(
                <b>this</b>._onSubmenuShow,
                oSubmenu,
                true
            );

        oSubmenu.hideEvent.subscribe(
                <b>this</b>._onSubmenuHide,
                oSubmenu,
                true
            );

    }

},

<i>/**
* @method _subscribeToItemEvents
* @description Subscribes a menu to a menu item's event.
* @private
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance whose events should be subscribed to.
*/</i>
_subscribeToItemEvents: <b>function</b>(p_oItem) {

    p_oItem.focusEvent.subscribe(<b>this</b>._onMenuItemFocus, p_oItem, <b>this</b>);

    p_oItem.blurEvent.subscribe(<b>this</b>._onMenuItemBlur, <b>this</b>, true);

    p_oItem.cfg.configChangedEvent.subscribe(
        <b>this</b>._onMenuItemConfigChange,
        p_oItem,
        <b>this</b>
    );

},

<i>/**
* @method _getOffsetWidth
* @description Returns the offset width of the menu's
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element.
* @private
*/</i>
_getOffsetWidth: <b>function</b>() {

    <b>var</b> oClone = <b>this</b>.element.cloneNode(true);

    Dom.setStyle(oClone, &quot;width&quot;, &quot;&quot;);

    document.body.appendChild(oClone);

    <b>var</b> sWidth = oClone.offsetWidth;

    document.body.removeChild(oClone);

    <b>return</b> sWidth;

},

<i>/**
* @method _cancelHideDelay
* @description Cancels the call to &quot;hideMenu.&quot;
* @private
*/</i>
_cancelHideDelay: <b>function</b>() {

    <b>var</b> oRoot = <b>this</b>.getRoot();

    <b>if</b>(oRoot._nHideDelayId) {

        window.clearTimeout(oRoot._nHideDelayId);

    }

},

<i>/**
* @method _execHideDelay
* @description Hides the menu after the number of milliseconds specified by
* the &quot;hidedelay&quot; configuration property.
* @private
*/</i>
_execHideDelay: <b>function</b>() {

    <b>this</b>._cancelHideDelay();

    <b>var</b> oRoot = <b>this</b>.getRoot();
    <b>var</b> me = <b>this</b>;

    <b>var</b> hideMenu = <b>function</b>() {

        <b>if</b>(oRoot.activeItem) {

            oRoot.clearActiveItem();

        }

        <b>if</b>(oRoot == me &amp;&amp; me.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

            me.hide();

        }

    };

    oRoot._nHideDelayId =
        window.setTimeout(hideMenu, oRoot.cfg.getProperty(&quot;hidedelay&quot;));

},

<i>/**
* @method _cancelShowDelay
* @description Cancels the call to the &quot;showMenu.&quot;
* @private
*/</i>
_cancelShowDelay: <b>function</b>() {

    <b>var</b> oRoot = <b>this</b>.getRoot();

    <b>if</b>(oRoot._nShowDelayId) {

        window.clearTimeout(oRoot._nShowDelayId);

    }

},

<i>/**
* @method _execShowDelay
* @description Shows the menu after the number of milliseconds specified by
* the &quot;showdelay&quot; configuration property have ellapsed.
* @private
* @param {YAHOO.widget.Menu} p_oMenu Object specifying the menu that should
* be made visible.
*/</i>
_execShowDelay: <b>function</b>(p_oMenu) {

    <b>this</b>._cancelShowDelay();

    <b>var</b> oRoot = <b>this</b>.getRoot();

    <b>var</b> showMenu = <b>function</b>() {

        p_oMenu.show();

    };

    oRoot._nShowDelayId =
        window.setTimeout(showMenu, oRoot.cfg.getProperty(&quot;showdelay&quot;));

},

<i>// Protected methods</i>

<i>/**
* @method _onMouseOver
* @description &quot;mouseover&quot; event handler <b>for</b> the menu.
* @protected
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onMouseOver: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> oEvent = p_aArgs[0];
    <b>var</b> oItem = p_aArgs[1];
    <b>var</b> oTarget = Event.getTarget(oEvent);

    <b>if</b>(
        !<b>this</b>._bHandledMouseOverEvent &amp;&amp;
        (oTarget == <b>this</b>.element || Dom.isAncestor(<b>this</b>.element, oTarget))
    ) {

        <i>// MENU  MOUSEOVER LOGIC HERE</i>

        <b>this</b>.clearActiveItem();

        <b>this</b>._bHandledMouseOverEvent = true;
        <b>this</b>._bHandledMouseOutEvent = false;

    }

    <b>if</b>(
        oItem &amp;&amp; !oItem.handledMouseOverEvent &amp;&amp;
        (oTarget == oItem.element || Dom.isAncestor(oItem.element, oTarget))
    ) {

        <b>var</b> oItemCfg = oItem.cfg;

        <i>// Select and focus the current menu item</i>

        oItemCfg.setProperty(&quot;selected&quot;, true);
        oItem.focus();

        <b>if</b>(this.cfg.getProperty(&quot;autosubmenudisplay&quot;)) {

            <i>// Show the submenu <b>this</b> menu item</i>

            <b>var</b> oSubmenu = oItemCfg.getProperty(&quot;submenu&quot;);

            <b>if</b>(oSubmenu) {

                <b>if</b>(this.cfg.getProperty(&quot;showdelay&quot;) &gt; 0) {

                    <b>this</b>._execShowDelay(oSubmenu);

                }
                <b>else</b> {

                    oSubmenu.show();

                }

            }

        }

        oItem.handledMouseOverEvent = true;
        oItem.handledMouseOutEvent = false;

    }

},

<i>/**
* @method _onMouseOut
* @description &quot;mouseout&quot; event handler <b>for</b> the menu.
* @protected
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onMouseOut: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> oEvent = p_aArgs[0];
    <b>var</b> oItem = p_aArgs[1];
    <b>var</b> oRelatedTarget = Event.getRelatedTarget(oEvent);
    <b>var</b> bMovingToSubmenu = false;

    <b>if</b>(oItem) {

        <b>var</b> oItemCfg = oItem.cfg;
        <b>var</b> oSubmenu = oItemCfg.getProperty(&quot;submenu&quot;);

        <b>if</b>(
            oSubmenu &amp;&amp;
            (
                oRelatedTarget == oSubmenu.element ||
                Dom.isAncestor(oSubmenu.element, oRelatedTarget)
            )
        ) {

            bMovingToSubmenu = true;

        }

        <b>if</b>(
            !oItem.handledMouseOutEvent &amp;&amp;
            (
                (
                    oRelatedTarget != oItem.element &amp;&amp;
                    !Dom.isAncestor(oItem.element, oRelatedTarget)
                ) || bMovingToSubmenu
            )
        ) {

            <b>if</b>(this.cfg.getProperty(&quot;showdelay&quot;) &gt; 0) {

                <b>this</b>._cancelShowDelay();

            }

            <b>if</b>(!bMovingToSubmenu) {

                oItemCfg.setProperty(&quot;selected&quot;, false);

            }

            <b>if</b>(this.cfg.getProperty(&quot;autosubmenudisplay&quot;)) {

                <b>if</b>(oSubmenu) {

                    <b>if</b>(
                        !(
                            oRelatedTarget == oSubmenu.element ||
                            YAHOO.util.Dom.isAncestor(
                                oSubmenu.element,
                                oRelatedTarget
                            )
                        )
                    ) {

                        oSubmenu.hide();

                    }

                }

            }

            oItem.handledMouseOutEvent = true;
            oItem.handledMouseOverEvent = false;

        }

    }

    <b>if</b>(
        !<b>this</b>._bHandledMouseOutEvent &amp;&amp;
        (
            (
                oRelatedTarget != <b>this</b>.element &amp;&amp;
                !Dom.isAncestor(<b>this</b>.element, oRelatedTarget)
            )
            || bMovingToSubmenu
        )
    ) {

        <b>this</b>._bHandledMouseOutEvent = true;
        <b>this</b>._bHandledMouseOverEvent = false;

    }

},

<i>/**
* @method _onClick
* @description &quot;click&quot; event handler <b>for</b> the menu.
* @protected
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onClick: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> oEvent = p_aArgs[0];
    <b>var</b> oItem = p_aArgs[1];
    <b>var</b> oTarget = Event.getTarget(oEvent);

    <b>if</b>(oItem) {

        <b>var</b> oItemCfg = oItem.cfg;
        <b>var</b> oSubmenu = oItemCfg.getProperty(&quot;submenu&quot;);

        <i>/*
            ACCESSIBILITY FEATURE FOR SCREEN READERS:
            Expand/collapse the submenu when the user clicks
            on the submenu indicator image.
        */</i>

        <b>if</b>(oTarget == oItem.submenuIndicator &amp;&amp; oSubmenu) {

            <b>if</b>(oSubmenu.cfg.getProperty(&quot;visible&quot;)) {

                oSubmenu.hide();

            }
            <b>else</b> {

                <b>this</b>.clearActiveItem();

                <b>this</b>.activeItem = oItem;

                oItem.cfg.setProperty(&quot;selected&quot;, true);

                oSubmenu.show();

            }

        }
        <b>else</b> {

            <b>var</b> sURL = oItemCfg.getProperty(&quot;url&quot;);
            <b>var</b> bCurrentPageURL = (sURL.substr((sURL.length-1),1) == &quot;#&quot;);
            <b>var</b> sTarget = oItemCfg.getProperty(&quot;target&quot;);
            <b>var</b> bHasTarget = (sTarget &amp;&amp; sTarget.length &gt; 0);

            <i>/*
                Prevent the browser from following links
                equal to &quot;#&quot;
            */</i>

            <b>if</b>(
                oTarget.tagName.toUpperCase() == &quot;A&quot; &amp;&amp;
                bCurrentPageURL &amp;&amp; !bHasTarget
            ) {

                Event.preventDefault(oEvent);

            }

            <b>if</b>(
                oTarget.tagName.toUpperCase() != &quot;A&quot; &amp;&amp;
                !bCurrentPageURL &amp;&amp; !bHasTarget
            ) {

                <i>/*
                    Follow the URL of the item regardless of
                    whether or not the user clicked specifically
                    on the anchor element.
                */</i>

                document.location = sURL;

            }

            <i>/*
                If the item doesn't navigate to a URL and it doesn't have
                a submenu, then collapse the menu tree.
            */</i>

            <b>if</b>(bCurrentPageURL &amp;&amp; !oSubmenu) {

                <b>var</b> oRoot = <b>this</b>.getRoot();

                <b>if</b>(oRoot.cfg.getProperty(&quot;position&quot;) == &quot;static&quot;) {

                    oRoot.clearActiveItem();

                }
                <b>else</b> {

                    oRoot.hide();

                }

            }

        }

    }

},

<i>/**
* @method _onKeyDown
* @description &quot;keydown&quot; event handler <b>for</b> the menu.
* @protected
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onKeyDown: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> oEvent = p_aArgs[0];
    <b>var</b> oItem = p_aArgs[1];
    <b>var</b> oSubmenu;

    <b>if</b>(oItem) {

        <b>var</b> oItemCfg = oItem.cfg;
        <b>var</b> oParentItem = <b>this</b>.parent;
        <b>var</b> oRoot;
        <b>var</b> oNextItem;

        <b>switch</b>(oEvent.keyCode) {

            <b>case</b> 38:    <i>// Up arrow</i>
            <b>case</b> 40:    <i>// Down arrow</i>

                <b>if</b>(
                    oItem == <b>this</b>.activeItem &amp;&amp;
                    !oItemCfg.getProperty(&quot;selected&quot;)
                ) {

                    oItemCfg.setProperty(&quot;selected&quot;, true);

                }
                <b>else</b> {

                    oNextItem = (oEvent.keyCode == 38) ?
                        oItem.getPreviousEnabledSibling() :
                        oItem.getNextEnabledSibling();

                    <b>if</b>(oNextItem) {

                        <b>this</b>.clearActiveItem();

                        oNextItem.cfg.setProperty(&quot;selected&quot;, true);
                        oNextItem.focus();

                    }

                }

                Event.preventDefault(oEvent);

            <b>break</b>;


            <b>case</b> 39:    <i>// Right arrow</i>

                oSubmenu = oItemCfg.getProperty(&quot;submenu&quot;);

                <b>if</b>(oSubmenu) {

                    <b>if</b>(!oItemCfg.getProperty(&quot;selected&quot;)) {

                        oItemCfg.setProperty(&quot;selected&quot;, true);

                    }

                    oSubmenu.show();

                    oSubmenu.setInitialSelection();

                }
                <b>else</b> {

                    oRoot = <b>this</b>.getRoot();

                    <b>if</b>(oRoot instanceof YAHOO.widget.MenuBar) {

                        oNextItem = oRoot.activeItem.getNextEnabledSibling();

                        <b>if</b>(oNextItem) {

                            oRoot.clearActiveItem();

                            oNextItem.cfg.setProperty(&quot;selected&quot;, true);

                            oSubmenu = oNextItem.cfg.getProperty(&quot;submenu&quot;);

                            <b>if</b>(oSubmenu) {

                                oSubmenu.show();

                            }

                            oNextItem.focus();

                        }

                    }

                }


                Event.preventDefault(oEvent);

            <b>break</b>;


            <b>case</b> 37:    <i>// Left arrow</i>

                <b>if</b>(oParentItem) {

                    <b>var</b> oParentMenu = oParentItem.parent;

                    <b>if</b>(oParentMenu instanceof YAHOO.widget.MenuBar) {

                        oNextItem =
                            oParentMenu.activeItem.getPreviousEnabledSibling();

                        <b>if</b>(oNextItem) {

                            oParentMenu.clearActiveItem();

                            oNextItem.cfg.setProperty(&quot;selected&quot;, true);

                            oSubmenu = oNextItem.cfg.getProperty(&quot;submenu&quot;);

                            <b>if</b>(oSubmenu) {

                                oSubmenu.show();

                            }

                            oNextItem.focus();

                        }

                    }
                    <b>else</b> {

                        <b>this</b>.hide();

                        oParentItem.focus();

                    }

                }

                Event.preventDefault(oEvent);

            <b>break</b>;

        }

    }

    <b>if</b>(oEvent.keyCode == 27) { <i>// Esc key</i>

        <b>if</b>(this.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

            <b>this</b>.hide();

            <b>if</b>(this.parent) {

                <b>this</b>.parent.focus();

            }

        }
        <b>else</b> if(<b>this</b>.activeItem) {

            oSubmenu = <b>this</b>.activeItem.cfg.getProperty(&quot;submenu&quot;);

            <b>if</b>(oSubmenu &amp;&amp; oSubmenu.cfg.getProperty(&quot;visible&quot;)) {

                oSubmenu.hide();
                <b>this</b>.activeItem.focus();

            }
            <b>else</b> {

                <b>this</b>.activeItem.cfg.setProperty(&quot;selected&quot;, false);
                <b>this</b>.activeItem.blur();

            }

        }

        Event.preventDefault(oEvent);

    }

},

<i>// Private methods</i>

<i>/**
* @method _onInit
* @description &quot;init&quot; event handler <b>for</b> the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onInit: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>if</b>(
        (
            (<b>this</b>.parent &amp;&amp; !<b>this</b>.lazyLoad) ||
            (!<b>this</b>.parent &amp;&amp; <b>this</b>.cfg.getProperty(&quot;position&quot;) == &quot;static&quot;) ||
            (
                !<b>this</b>.parent &amp;&amp;
                !<b>this</b>.lazyLoad &amp;&amp;
                <b>this</b>.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;
            )
        ) &amp;&amp;
        <b>this</b>.getItemGroups().length === 0
    ) {

        <b>if</b>(this.srcElement) {

            <b>this</b>._initSubTree();

        }

        <b>if</b>(this.itemData) {

            <b>this</b>.addItems(<b>this</b>.itemData);

        }

    }
    <b>else</b> if(<b>this</b>.lazyLoad) {

        <b>this</b>.cfg.fireQueue();

    }

},

<i>/**
* @method _onBeforeRender
* @description &quot;beforerender&quot; event handler <b>for</b> the menu.  Appends all of the
* &lt;code&gt;&amp;#60;ul&amp;#62;&lt;/code&gt;, &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; and their accompanying
* title elements to the body element of the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onBeforeRender: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> oConfig = <b>this</b>.cfg;
    <b>var</b> oEl = <b>this</b>.element;
    <b>var</b> nListElements = <b>this</b>._aListElements.length;

    <b>if</b>(nListElements &gt; 0) {

        <b>var</b> i = 0;
        <b>var</b> bFirstList = true;
        <b>var</b> oUL;
        <b>var</b> oGroupTitle;

        <b>do</b> {

            oUL = <b>this</b>._aListElements[i];

            <b>if</b>(oUL) {

                <b>if</b>(bFirstList) {

                    Dom.addClass(oUL, &quot;first-of-type&quot;);
                    bFirstList = false;

                }

                <b>if</b>(!Dom.isAncestor(oEl, oUL)) {

                    <b>this</b>.appendToBody(oUL);

                }

                oGroupTitle = <b>this</b>._aGroupTitleElements[i];

                <b>if</b>(oGroupTitle) {

                    <b>if</b>(!Dom.isAncestor(oEl, oGroupTitle)) {

                        oUL.parentNode.insertBefore(oGroupTitle, oUL);

                    }

                    Dom.addClass(oUL, &quot;hastitle&quot;);

                }

            }

            i++;

        }
        <b>while</b>(i &lt; nListElements);

    }

},

<i>/**
* @method _onRender
* @description &quot;render&quot; event handler <b>for</b> the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onRender: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>if</b>(this.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

        <b>var</b> sWidth =
            <b>this</b>.element.parentNode.tagName.toUpperCase() == &quot;BODY&quot; ?
            <b>this</b>.element.offsetWidth : <b>this</b>._getOffsetWidth();

        <b>this</b>.cfg.setProperty(&quot;width&quot;, (sWidth + &quot;px&quot;));

    }

},

<i>/**
* @method _onBeforeShow
* @description &quot;beforeshow&quot; event handler <b>for</b> the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
_onBeforeShow: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>if</b>(this.lazyLoad &amp;&amp; <b>this</b>.getItemGroups().length === 0) {

        <b>if</b>(this.srcElement) {

            <b>this</b>._initSubTree();

        }

        <b>if</b>(this.itemData) {

            <b>if</b>(
                <b>this</b>.parent &amp;&amp; <b>this</b>.parent.parent &amp;&amp;
                <b>this</b>.parent.parent.srcElement &amp;&amp;
                <b>this</b>.parent.parent.srcElement.tagName.toUpperCase() == &quot;SELECT&quot;
            ) {

                <b>var</b> nOptions = <b>this</b>.itemData.length;

                <b>for</b>(var n=0; n&lt;nOptions; n++) {

                    <b>if</b>(this.itemData[n].tagName) {

                        <b>this</b>.addItem((<b>new</b> this.ITEM_TYPE(<b>this</b>.itemData[n])));

                    }

                }

            }
            <b>else</b> {

                <b>this</b>.addItems(<b>this</b>.itemData);

            }

        }

        <b>if</b>(this.srcElement) {

            <b>this</b>.render();

        }
        <b>else</b> {

            <b>if</b>(this.parent) {

                <b>this</b>.render(<b>this</b>.parent.element);

            }
            <b>else</b> {

                <b>this</b>.render(<b>this</b>.cfg.getProperty(&quot;container&quot;));

            }

        }

    }

},

<i>/**
* @method _onShow
* @description &quot;show&quot; event handler <b>for</b> the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that fired
* the event.
*/</i>
_onShow: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>this</b>.setInitialFocus();

    <b>var</b> oParent = <b>this</b>.parent;

    <b>if</b>(oParent) {

        <b>var</b> oParentMenu = oParent.parent;

        <b>var</b> aParentAlignment = oParentMenu.cfg.getProperty(&quot;submenualignment&quot;);
        <b>var</b> aAlignment = <b>this</b>.cfg.getProperty(&quot;submenualignment&quot;);

        <b>if</b>(
            (aParentAlignment[0] != aAlignment[0]) &amp;&amp;
            (aParentAlignment[1] != aAlignment[1])
        ) {

            <b>this</b>.cfg.setProperty(
                &quot;submenualignment&quot;,
                [ aParentAlignment[0], aParentAlignment[1] ]
            );

        }

        <b>if</b>(
            !oParentMenu.cfg.getProperty(&quot;autosubmenudisplay&quot;) &amp;&amp;
            oParentMenu.cfg.getProperty(&quot;position&quot;) == &quot;static&quot;
        ) {

            oParentMenu.cfg.setProperty(&quot;autosubmenudisplay&quot;, true);

            <i>/**
            * &quot;click&quot; event handler <b>for</b> the document
            * @private
            * @param {Event} p_oEvent Object reference <b>for</b> the DOM event object
            * passed back by the event utility (YAHOO.util.Event).
            */</i>
            <b>var</b> disableAutoSubmenuDisplay = <b>function</b>(p_oEvent) {

                <b>if</b>(
                    p_oEvent.type == &quot;mousedown&quot; ||
                    (p_oEvent.type == &quot;keydown&quot; &amp;&amp; p_oEvent.keyCode == 27)
                ) {

                    <i>/*
                        Set the &quot;autosubmenudisplay&quot; to &quot;false&quot; <b>if</b> the user
                        clicks outside the menu bar.
                    */</i>

                    <b>var</b> oTarget = Event.getTarget(p_oEvent);

                    <b>if</b>(
                        oTarget != oParentMenu.element ||
                        !YAHOO.util.Dom.isAncestor(oParentMenu.element, oTarget)
                    ) {

                        oParentMenu.cfg.setProperty(
                            &quot;autosubmenudisplay&quot;,
                            false
                        );

                        Event.removeListener(
                                document,
                                &quot;mousedown&quot;,
                                disableAutoSubmenuDisplay
                            );

                        Event.removeListener(
                                document,
                                &quot;keydown&quot;,
                                disableAutoSubmenuDisplay
                            );

                    }

                }

            };

            Event.addListener(document, &quot;mousedown&quot;, disableAutoSubmenuDisplay);
            Event.addListener(document, &quot;keydown&quot;, disableAutoSubmenuDisplay);

        }

    }

},

<i>/**
* @method _onBeforeHide
* @description &quot;beforehide&quot; event handler <b>for</b> the menu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that fired
* the event.
*/</i>
_onBeforeHide: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>this</b>.clearActiveItem(true);

},

<i>/**
* @method _onParentMenuConfigChange
* @description &quot;configchange&quot; event handler <b>for</b> a submenu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oSubmenu Object representing the submenu that
* subscribed to the event.
*/</i>
_onParentMenuConfigChange: <b>function</b>(p_sType, p_aArgs, p_oSubmenu) {

    <b>var</b> sPropertyName = p_aArgs[0][0];
    <b>var</b> oPropertyValue = p_aArgs[0][1];

    <b>switch</b>(sPropertyName) {

        <b>case</b> &quot;iframe&quot;:
        <b>case</b> &quot;constraintoviewport&quot;:
        <b>case</b> &quot;hidedelay&quot;:
        <b>case</b> &quot;showdelay&quot;:
        <b>case</b> &quot;clicktohide&quot;:
        <b>case</b> &quot;effect&quot;:

            p_oSubmenu.cfg.setProperty(sPropertyName, oPropertyValue);

        <b>break</b>;

    }

},

<i>/**
* @method _onParentMenuRender
* @description &quot;render&quot; event handler <b>for</b> a submenu.  Renders a
* submenu <b>in</b> response to the firing of its parent's &quot;render&quot; event.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oSubmenu Object representing the submenu that
* subscribed to the event.
*/</i>
_onParentMenuRender: <b>function</b>(p_sType, p_aArgs, p_oSubmenu) {

    <i>/*
        Set the &quot;constraintoviewport&quot; configuration
        property to match the parent Menu
    */</i>

    <b>var</b> oParentMenu = p_oSubmenu.parent.parent;

    <b>var</b> oConfig = {

            constraintoviewport:
                oParentMenu.cfg.getProperty(&quot;constraintoviewport&quot;),

            xy: [0,0],

            clicktohide:
                oParentMenu.cfg.getProperty(&quot;clicktohide&quot;),

            effect:
                oParentMenu.cfg.getProperty(&quot;effect&quot;)

        };

    <b>var</b> nShowDelay = oParentMenu.cfg.getProperty(&quot;showdelay&quot;);

    <b>if</b>(nShowDelay &gt; 0) {

        oConfig.showdelay = nShowDelay;

    }

    <b>var</b> nHideDelay = oParentMenu.cfg.getProperty(&quot;hidedelay&quot;);

    <b>if</b>(nHideDelay &gt; 0) {

        oConfig.hidedelay = nHideDelay;

    }

    <i>/*
        Only sync the &quot;iframe&quot; configuration property <b>if</b> the parent
        menu's &quot;position&quot; configuration is the same.
    */</i>

    <b>if</b>(
        <b>this</b>.cfg.getProperty(&quot;position&quot;) ==
        oParentMenu.cfg.getProperty(&quot;position&quot;)
    ) {

        oConfig.iframe = oParentMenu.cfg.getProperty(&quot;iframe&quot;);

    }


    p_oSubmenu.cfg.applyConfig(oConfig);

    <b>if</b>(!<b>this</b>.lazyLoad) {

        <b>if</b>(Dom.inDocument(<b>this</b>.element)) {

            <b>this</b>.render();

        }
        <b>else</b> {

            <b>this</b>.render(<b>this</b>.parent.element);

        }

    }

},

<i>/**
* @method _onSubmenuBeforeShow
* @description &quot;beforeshow&quot; event handler <b>for</b> a submenu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oSubmenu Object representing the submenu that
* subscribed to the event.
*/</i>
_onSubmenuBeforeShow: <b>function</b>(p_sType, p_aArgs, p_oSubmenu) {

    <b>var</b> oParent = <b>this</b>.parent;
    <b>var</b> aAlignment = oParent.parent.cfg.getProperty(&quot;submenualignment&quot;);

    <b>this</b>.cfg.setProperty(
        &quot;context&quot;,
        [oParent.element, aAlignment[0], aAlignment[1]]
    );

    oParent.submenuIndicator.alt = oParent.EXPANDED_SUBMENU_INDICATOR_ALT_TEXT;

},

<i>/**
* @method _onSubmenuShow
* @description &quot;show&quot; event handler <b>for</b> a submenu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oSubmenu Object representing the submenu that
* subscribed to the event.
*/</i>
_onSubmenuShow: <b>function</b>(p_sType, p_aArgs, p_oSubmenu) {

    <b>var</b> oParent = <b>this</b>.parent;

    oParent.submenuIndicator.alt = oParent.EXPANDED_SUBMENU_INDICATOR_ALT_TEXT;

},

<i>/**
* @method _onSubmenuHide
* @description &quot;hide&quot; Custom Event handler <b>for</b> a submenu.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oSubmenu Object representing the submenu that
* subscribed to the event.
*/</i>
_onSubmenuHide: <b>function</b>(p_sType, p_aArgs, p_oSubmenu) {

    <b>var</b> oParent = <b>this</b>.parent;

    oParent.submenuIndicator.alt = oParent.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;

},

<i>/**
* @method _onMenuItemFocus
* @description &quot;focus&quot; event handler <b>for</b> the menu's items.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
* that fired the event.
*/</i>
_onMenuItemFocus: <b>function</b>(p_sType, p_aArgs, p_oItem) {

    <b>this</b>.activeItem = p_oItem;

},

<i>/**
* @method _onMenuItemBlur
* @description &quot;blur&quot; event handler <b>for</b> the menu's items.
* @private
* @param {String} p_sType String representing the name of the event
* that was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
*/</i>
_onMenuItemBlur: <b>function</b>(p_sType, p_aArgs) {

    <b>this</b>.activeItem = null;

},

<i>/**
* @method _onMenuItemConfigChange
* @description &quot;configchange&quot; event handler <b>for</b> the menu's items.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
* that fired the event.
*/</i>
_onMenuItemConfigChange: <b>function</b>(p_sType, p_aArgs, p_oItem) {

    <b>var</b> sProperty = p_aArgs[0][0];

    <b>switch</b>(sProperty) {

        <b>case</b> &quot;submenu&quot;:

            <b>var</b> oSubmenu = p_aArgs[0][1];

            <b>if</b>(oSubmenu) {

                <b>this</b>._configureSubmenu(p_oItem);

            }

        <b>break</b>;

        <b>case</b> &quot;text&quot;:
        <b>case</b> &quot;helptext&quot;:

            <i>/*
                A change to an item's &quot;text&quot; or &quot;helptext&quot;
                configuration properties requires the width of the parent
                menu to be recalculated.
            */</i>

            <b>if</b>(this.element.style.width) {

                <b>var</b> sWidth = <b>this</b>._getOffsetWidth() + &quot;px&quot;;

                Dom.setStyle(<b>this</b>.element, &quot;width&quot;, sWidth);

            }

        <b>break</b>;

    }

},

<i>// Public event handlers <b>for</b> configuration properties</i>

<i>/**
* @method enforceConstraints
* @description The <b>default</b> event handler executed when the moveEvent is fired,
* <b>if</b> the &quot;constraintoviewport&quot; configuration property is set to true.
* @param {String} type The name of the event that was fired.
* @param {Array} args Collection of arguments sent when the
* event was fired.
* @param {Array} obj Array containing the current Menu instance
* and the item that fired the event.
*/</i>
enforceConstraints: <b>function</b>(type, args, obj) {

    <b>var</b> oConfig = <b>this</b>.cfg;

    <b>var</b> pos = args[0];

    <b>var</b> x = pos[0];
    <b>var</b> y = pos[1];

    <b>var</b> bod = document.getElementsByTagName('body')[0];
    <b>var</b> htm = document.getElementsByTagName('html')[0];

    <b>var</b> bodyOverflow = Dom.getStyle(bod, &quot;overflow&quot;);
    <b>var</b> htmOverflow = Dom.getStyle(htm, &quot;overflow&quot;);

    <b>var</b> offsetHeight = <b>this</b>.element.offsetHeight;
    <b>var</b> offsetWidth = <b>this</b>.element.offsetWidth;

    <b>var</b> viewPortWidth = Dom.getClientWidth();
    <b>var</b> viewPortHeight = Dom.getClientHeight();

    <b>var</b> scrollX = window.scrollX || document.body.scrollLeft;
    <b>var</b> scrollY = window.scrollY || document.body.scrollTop;

    <b>var</b> topConstraint = scrollY + 10;
    <b>var</b> leftConstraint = scrollX + 10;
    <b>var</b> bottomConstraint = scrollY + viewPortHeight - offsetHeight - 10;
    <b>var</b> rightConstraint = scrollX + viewPortWidth - offsetWidth - 10;

    <b>var</b> aContext = oConfig.getProperty(&quot;context&quot;);
    <b>var</b> oContextElement = aContext ? aContext[0] : null;


    <b>if</b> (x &lt; 10) {

        x = leftConstraint;

    } <b>else</b> if ((x + offsetWidth) &gt; viewPortWidth) {

        <b>if</b>(
            oContextElement &amp;&amp;
            ((x - oContextElement.offsetWidth) &gt; offsetWidth)
        ) {

            x = (x - (oContextElement.offsetWidth + offsetWidth));

        }
        <b>else</b> {

            x = rightConstraint;

        }

    }

    <b>if</b> (y &lt; 10) {

        y = topConstraint;

    } <b>else</b> if (y &gt; bottomConstraint) {

        <b>if</b>(oContextElement &amp;&amp; (y &gt; offsetHeight)) {

            y = ((y + oContextElement.offsetHeight) - offsetHeight);

        }
        <b>else</b> {

            y = bottomConstraint;

        }

    }

    oConfig.setProperty(&quot;x&quot;, x, true);
    oConfig.setProperty(&quot;y&quot;, y, true);

},

<i>/**
* @method configVisible
* @description Event handler <b>for</b> when the &quot;visible&quot; configuration property
* the menu changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
configVisible: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>if</b>(this.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

        YAHOO.widget.Menu.superclass.configVisible.call(
            <b>this</b>,
            p_sType,
            p_aArgs,
            p_oMenu
        );

    }
    <b>else</b> {

        <b>var</b> bVisible = p_aArgs[0];
    	<b>var</b> sDisplay = Dom.getStyle(<b>this</b>.element, &quot;display&quot;);

        <b>if</b>(bVisible) {

            <b>if</b>(sDisplay != &quot;block&quot;) {
                <b>this</b>.beforeShowEvent.fire();
                Dom.setStyle(<b>this</b>.element, &quot;display&quot;, &quot;block&quot;);
                <b>this</b>.showEvent.fire();
            }

        }
        <b>else</b> {

			<b>if</b>(sDisplay == &quot;block&quot;) {
				<b>this</b>.beforeHideEvent.fire();
				Dom.setStyle(<b>this</b>.element, &quot;display&quot;, &quot;none&quot;);
				<b>this</b>.hideEvent.fire();
			}

        }

    }

},

<i>/**
* @method configPosition
* @description Event handler <b>for</b> when the &quot;position&quot; configuration property
* of the menu changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
configPosition: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> sCSSPosition = p_aArgs[0] == &quot;static&quot; ? &quot;static&quot; : &quot;absolute&quot;;
    <b>var</b> oCfg = <b>this</b>.cfg;

    Dom.setStyle(<b>this</b>.element, &quot;position&quot;, sCSSPosition);

    <b>if</b>(sCSSPosition == &quot;static&quot;) {

        <i>/*
            Remove the iframe <b>for</b> statically positioned menus since it will
            intercept mouse events.
        */</i>

        oCfg.setProperty(&quot;iframe&quot;, false);

        <i>// Statically positioned menus are visible by <b>default</b></i>

        Dom.setStyle(<b>this</b>.element, &quot;display&quot;, &quot;block&quot;);

        oCfg.setProperty(&quot;visible&quot;, true);

    }
    <b>else</b> {

        <i>/*
            Even though the &quot;visible&quot; property is queued to
            &quot;false&quot; by <b>default</b>, we need to set the &quot;visibility&quot; property to
            &quot;hidden&quot; since Overlay's &quot;configVisible&quot; implementation checks the
            element's &quot;visibility&quot; style property before deciding whether
            or not to show an Overlay instance.
        */</i>

        Dom.setStyle(<b>this</b>.element, &quot;visibility&quot;, &quot;hidden&quot;);

    }

    <b>if</b>(sCSSPosition == &quot;absolute&quot;) {

        <b>var</b> nZIndex = oCfg.getProperty(&quot;zindex&quot;);

        <b>if</b>(!nZIndex || nZIndex === 0) {

            nZIndex = <b>this</b>.parent ?
                (<b>this</b>.parent.parent.cfg.getProperty(&quot;zindex&quot;) + 1) : 1;

            oCfg.setProperty(&quot;zindex&quot;, nZIndex);

        }

    }

},

<i>/**
* @method configIframe
* @description Event handler <b>for</b> when the &quot;iframe&quot; configuration property of
* the menu changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
configIframe: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>if</b>(this.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

        YAHOO.widget.Menu.superclass.configIframe.call(
            <b>this</b>,
            p_sType,
            p_aArgs,
            p_oMenu
        );

    }

},

<i>/**
* @method configHideDelay
* @description Event handler <b>for</b> when the &quot;hidedelay&quot; configuration property
* of the menu changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
configHideDelay: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> nHideDelay = p_aArgs[0];
    <b>var</b> oMouseOutEvent = <b>this</b>.mouseOutEvent;
    <b>var</b> oMouseOverEvent = <b>this</b>.mouseOverEvent;
    <b>var</b> oKeyDownEvent = <b>this</b>.keyDownEvent;

    <b>if</b>(nHideDelay &gt; 0) {

        <i>/*
            Only assign event handlers once. This way the user change
            the value <b>for</b> the hidedelay as many times as they want.
        */</i>

        <b>if</b>(!<b>this</b>._hideDelayEventHandlersAssigned) {

            oMouseOutEvent.subscribe(<b>this</b>._execHideDelay, true);
            oMouseOverEvent.subscribe(<b>this</b>._cancelHideDelay, <b>this</b>, true);
            oKeyDownEvent.subscribe(<b>this</b>._cancelHideDelay, <b>this</b>, true);

            <b>this</b>._hideDelayEventHandlersAssigned = true;

        }

    }
    <b>else</b> {

        oMouseOutEvent.unsubscribe(<b>this</b>._execHideDelay, <b>this</b>);
        oMouseOverEvent.unsubscribe(<b>this</b>._cancelHideDelay, <b>this</b>);
        oKeyDownEvent.unsubscribe(<b>this</b>._cancelHideDelay, <b>this</b>);

        <b>this</b>._hideDelayEventHandlersAssigned = false;

    }

},

<i>/**
* @method configContainer
* @description Event handler <b>for</b> when the &quot;container&quot; configuration property
of the menu changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.Menu} p_oMenu Object representing the menu that
* fired the event.
*/</i>
configContainer: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

	<b>var</b> oElement = p_aArgs[0];

	<b>if</b>(typeof oElement == 'string') {

        <b>this</b>.cfg.setProperty(
                &quot;container&quot;,
                document.getElementById(oElement),
                true
            );

	}

},

<i>// Public methods</i>

<i>/**
* Event handler called when the resize monitor element's &quot;resize&quot; evet is fired.
*/</i>
onDomResize: <b>function</b>(e, obj) {

    <b>if</b>(!<b>this</b>._handleResize) {

        <b>this</b>._handleResize = true;
        <b>return</b>;

    }

    <b>var</b> oConfig = <b>this</b>.cfg;

    <b>if</b>(oConfig.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

        oConfig.setProperty(&quot;width&quot;, (<b>this</b>._getOffsetWidth() + &quot;px&quot;));

    }

    YAHOO.widget.Menu.superclass.onDomResize.call(<b>this</b>, e, obj);

},

<i>/**
* @method initEvents
* @description Initializes the custom events <b>for</b> the menu.
*/</i>
initEvents: <b>function</b>() {

	YAHOO.widget.Menu.superclass.initEvents.call(<b>this</b>);

    <i>// Create custom events</i>

    <b>var</b> CustomEvent = YAHOO.util.CustomEvent;

    <b>this</b>.mouseOverEvent = <b>new</b> CustomEvent(&quot;mouseOverEvent&quot;, <b>this</b>);
    <b>this</b>.mouseOutEvent = <b>new</b> CustomEvent(&quot;mouseOutEvent&quot;, <b>this</b>);
    <b>this</b>.mouseDownEvent = <b>new</b> CustomEvent(&quot;mouseDownEvent&quot;, <b>this</b>);
    <b>this</b>.mouseUpEvent = <b>new</b> CustomEvent(&quot;mouseUpEvent&quot;, <b>this</b>);
    <b>this</b>.clickEvent = <b>new</b> CustomEvent(&quot;clickEvent&quot;, <b>this</b>);
    <b>this</b>.keyPressEvent = <b>new</b> CustomEvent(&quot;keyPressEvent&quot;, <b>this</b>);
    <b>this</b>.keyDownEvent = <b>new</b> CustomEvent(&quot;keyDownEvent&quot;, <b>this</b>);
    <b>this</b>.keyUpEvent = <b>new</b> CustomEvent(&quot;keyUpEvent&quot;, <b>this</b>);
    <b>this</b>.itemAddedEvent = <b>new</b> CustomEvent(&quot;itemAddedEvent&quot;, <b>this</b>);
    <b>this</b>.itemRemovedEvent = <b>new</b> CustomEvent(&quot;itemRemovedEvent&quot;, <b>this</b>);

},

<i>/**
* @method getRoot
* @description Finds the menu's root menu.
*/</i>
getRoot: <b>function</b>() {

    <b>var</b> oItem = <b>this</b>.parent;

    <b>if</b>(oItem) {

        <b>var</b> oParentMenu = oItem.parent;

        <b>return</b> oParentMenu ? oParentMenu.getRoot() : <b>this</b>;

    }
    <b>else</b> {

        <b>return</b> this;

    }

},

<i>/**
* @method toString
* @description Returns a string representing the menu.
* @<b>return</b> {String}
*/</i>
toString: <b>function</b>() {

    <b>return</b> (&quot;Menu &quot; + <b>this</b>.id);

},

<i>/**
* @method setItemGroupTitle
* @description Sets the title of a group of menu items.
* @param {String} p_sGroupTitle String specifying the title of the group.
* @param {Number} p_nGroupIndex Optional. Number specifying the group to which
* the title belongs.
*/</i>
setItemGroupTitle: <b>function</b>(p_sGroupTitle, p_nGroupIndex) {

    <b>if</b>(typeof p_sGroupTitle == &quot;string&quot; &amp;&amp; p_sGroupTitle.length &gt; 0) {

        <b>var</b> nGroupIndex = <b>typeof</b> p_nGroupIndex == &quot;number&quot; ? p_nGroupIndex : 0;
        <b>var</b> oTitle = <b>this</b>._aGroupTitleElements[nGroupIndex];

        <b>if</b>(oTitle) {

            oTitle.innerHTML = p_sGroupTitle;

        }
        <b>else</b> {

            oTitle = document.createElement(<b>this</b>.GROUP_TITLE_TAG_NAME);

            oTitle.innerHTML = p_sGroupTitle;

            <b>this</b>._aGroupTitleElements[nGroupIndex] = oTitle;

        }

        <b>var</b> i = <b>this</b>._aGroupTitleElements.length - 1;
        <b>var</b> nFirstIndex;

        <b>do</b> {

            <b>if</b>(this._aGroupTitleElements[i]) {

                Dom.removeClass(<b>this</b>._aGroupTitleElements[i], &quot;first-of-type&quot;);

                nFirstIndex = i;

            }

        }
        <b>while</b>(i--);

        <b>if</b>(nFirstIndex !== null) {

            Dom.addClass(
                <b>this</b>._aGroupTitleElements[nFirstIndex],
                &quot;first-of-type&quot;
            );

        }

    }

},

<i>/**
* @method addItem
* @description Appends an item to the menu.
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance to be added to the menu.
* @param {String} p_oItem String specifying the text of the item to be added
* to the menu.
* @param {Object} p_oItem Object literal containing a set of menu item
* configuration properties.
* @param {Number} p_nGroupIndex Optional. Number indicating the group to
* which the item belongs.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
addItem: <b>function</b>(p_oItem, p_nGroupIndex) {

    <b>if</b>(p_oItem) {

        <b>return</b> this._addItemToGroup(p_nGroupIndex, p_oItem);

    }

},

<i>/**
* @method addItems
* @description Adds an array of items to the menu.
* @param {Array} p_aItems Array of items to be added to the menu.  The array
* can contain strings specifying the text <b>for</b> each item to be created, object
* literals specifying each of the menu item configuration properties,
* or MenuItem instances.
* @param {Number} p_nGroupIndex Optional. Number specifying the group to
* which the items belongs.
* @<b>return</b> {Array}
*/</i>
addItems: <b>function</b>(p_aItems, p_nGroupIndex) {

    <b>function</b> isArray(p_oValue) {

        <b>return</b> (<b>typeof</b> p_oValue == &quot;object&quot; &amp;&amp; p_oValue.constructor == Array);

    }

    <b>if</b>(isArray(p_aItems)) {

        <b>var</b> nItems = p_aItems.length;
        <b>var</b> aItems = [];
        <b>var</b> oItem;

        <b>for</b>(var i=0; i&lt;nItems; i++) {

            oItem = p_aItems[i];

            <b>if</b>(isArray(oItem)) {

                aItems[aItems.length] = <b>this</b>.addItems(oItem, i);

            }
            <b>else</b> {

                aItems[aItems.length] =
                    <b>this</b>._addItemToGroup(p_nGroupIndex, oItem);

            }

        }

        <b>if</b>(aItems.length) {

            <b>return</b> aItems;

        }

    }

},

<i>/**
* @method insertItem
* @description Inserts an item into the menu at the specified index.
* @param {YAHOO.widget.MenuItem} p_oItem Object reference <b>for</b> the MenuItem
* instance to be added to the menu.
* @param {String} p_oItem String specifying the text of the item to be added
* to the menu.
* @param {Object} p_oItem Object literal containing a set of menu item
* configuration properties.
* @param {Number} p_nItemIndex Number indicating the ordinal position at which
* the item should be added.
* @param {Number} p_nGroupIndex Optional. Number indicating the group to which
* the item belongs.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
insertItem: <b>function</b>(p_oItem, p_nItemIndex, p_nGroupIndex) {

    <b>if</b>(p_oItem) {

        <b>return</b> this._addItemToGroup(p_nGroupIndex, p_oItem, p_nItemIndex);

    }

},

<i>/**
* @method removeItem
* @description Removes the specified item from the menu.
* @param {YAHOO.widget.MenuItem} p_oObject Object reference <b>for</b> the MenuItem
* instance to be removed from the menu.
* @param {Number} p_oObject Number specifying the index of the item
* to be removed.
* @param {Number} p_nGroupIndex Optional. Number specifying the group to
* which the item belongs.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
removeItem: <b>function</b>(p_oObject, p_nGroupIndex) {

    <b>if</b>(typeof p_oObject != &quot;undefined&quot;) {

        <b>var</b> oItem;

        <b>if</b>(p_oObject instanceof YAHOO.widget.MenuItem) {

            oItem = <b>this</b>._removeItemFromGroupByValue(p_nGroupIndex, p_oObject);

        }
        <b>else</b> if(<b>typeof</b> p_oObject == &quot;number&quot;) {

            oItem = <b>this</b>._removeItemFromGroupByIndex(p_nGroupIndex, p_oObject);

        }

        <b>if</b>(oItem) {

            oItem.destroy();

            <b>return</b> oItem;

        }

    }

},

<i>/**
* @method getItemGroups
* @description Returns a multi-dimensional array of all of the items <b>in</b> the menu.
* @<b>return</b> {Array}
*/</i>
getItemGroups: <b>function</b>() {

    <b>return</b> this._aItemGroups;

},

<i>/**
* @method getItem
* @description Returns the item at the specified index.
* @param {Number} p_nItemIndex Number indicating the ordinal position of the
* item to be retrieved.
* @param {Number} p_nGroupIndex Optional. Number indicating the group to which
* the item belongs.
* @<b>return</b> {YAHOO.widget.MenuItem}
*/</i>
getItem: <b>function</b>(p_nItemIndex, p_nGroupIndex) {

    <b>if</b>(typeof p_nItemIndex == &quot;number&quot;) {

        <b>var</b> aGroup = <b>this</b>._getItemGroup(p_nGroupIndex);

        <b>if</b>(aGroup) {

            <b>return</b> aGroup[p_nItemIndex];

        }

    }

},

<i>/**
* @method destroy
* @description Removes the menu's &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element
* (and accompanying child nodes) from the document.
*/</i>
destroy: <b>function</b>() {

    <i>// Remove Custom Event listeners</i>

    <b>this</b>.mouseOverEvent.unsubscribeAll();
    <b>this</b>.mouseOutEvent.unsubscribeAll();
    <b>this</b>.mouseDownEvent.unsubscribeAll();
    <b>this</b>.mouseUpEvent.unsubscribeAll();
    <b>this</b>.clickEvent.unsubscribeAll();
    <b>this</b>.keyPressEvent.unsubscribeAll();
    <b>this</b>.keyDownEvent.unsubscribeAll();
    <b>this</b>.keyUpEvent.unsubscribeAll();

    <b>var</b> nItemGroups = <b>this</b>._aItemGroups.length;
    <b>var</b> nItems;
    <b>var</b> oItemGroup;
    <b>var</b> oItem;
    <b>var</b> i;
    <b>var</b> n;

    <i>// Remove all items</i>

    <b>if</b>(nItemGroups &gt; 0) {

        i = nItemGroups - 1;

        <b>do</b> {

            oItemGroup = <b>this</b>._aItemGroups[i];

            <b>if</b>(oItemGroup) {

                nItems = oItemGroup.length;

                <b>if</b>(nItems &gt; 0) {

                    n = nItems - 1;

                    <b>do</b> {

                        oItem = <b>this</b>._aItemGroups[i][n];

                        <b>if</b>(oItem) {

                            oItem.destroy();
                        }

                    }
                    <b>while</b>(n--);

                }

            }

        }
        <b>while</b>(i--);

    }

    <i>// Continue <b>with</b> the superclass implementation of <b>this</b> method</i>

    YAHOO.widget.Menu.superclass.destroy.call(<b>this</b>);


},

<i>/**
* @method setInitialFocus
* @description Sets focus to the menu's first enabled item.
*/</i>
setInitialFocus: <b>function</b>() {

    <b>var</b> oItem = <b>this</b>._getFirstEnabledItem();

    <b>if</b>(oItem) {

        oItem.focus();
    }

},

<i>/**
* @method setInitialSelection
* @description Sets the &quot;selected&quot; configuration property of the menu's first
* enabled item to &quot;true.&quot;
*/</i>
setInitialSelection: <b>function</b>() {

    <b>var</b> oItem = <b>this</b>._getFirstEnabledItem();

    <b>if</b>(oItem) {

        oItem.cfg.setProperty(&quot;selected&quot;, true);
    }

},

<i>/**
* @method clearActiveItem
* @description Sets the &quot;selected&quot; configuration property of the menu's active
* item to &quot;false&quot; and hides the item's submenu.
* @param {Boolean} p_bBlur Boolean indicating <b>if</b> the menu's active item
* should be blurred.
*/</i>
clearActiveItem: <b>function</b>(p_bBlur) {

    <b>if</b>(this.cfg.getProperty(&quot;showdelay&quot;) &gt; 0) {

        <b>this</b>._cancelShowDelay();

    }

    <b>var</b> oActiveItem = <b>this</b>.activeItem;

    <b>if</b>(oActiveItem) {

        <b>var</b> oConfig = oActiveItem.cfg;

        oConfig.setProperty(&quot;selected&quot;, false);

        <b>var</b> oSubmenu = oConfig.getProperty(&quot;submenu&quot;);

        <b>if</b>(oSubmenu) {

            oSubmenu.hide();

        }

        <b>if</b>(p_bBlur) {

            oActiveItem.blur();

        }

    }

},

<i>/**
* @description Initializes the class's configurable properties which can be
* changed using the menu's Config object (&quot;cfg&quot;).
* @method initDefaultConfig
*/</i>
initDefaultConfig: <b>function</b>() {

    YAHOO.widget.Menu.superclass.initDefaultConfig.call(<b>this</b>);

    <b>var</b> oConfig = <b>this</b>.cfg;

	<i>// Add configuration properties</i>

    <i>/*
        Change the <b>default</b> value <b>for</b> the &quot;visible&quot; configuration
        property to &quot;false&quot; by re-adding the property.
    */</i>
<i>// holder</i>
<i>/**
    * @config visible
    * @description Boolean indicating whether or not the menu is visible.  If
    * the menu's &quot;position&quot; configuration property is set to &quot;dynamic&quot; (the
    * <b>default</b>), <b>this</b> property toggles the menu's &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt;
    * element's &quot;visibility&quot; style property between &quot;visible&quot; (true) or
    * &quot;hidden&quot; (false).  If the menu's &quot;position&quot; configuration property is
    * set to &quot;static&quot; <b>this</b> property toggles the menu's
    * &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element's &quot;display&quot; style property
    * between &quot;block&quot; (true) or &quot;none&quot; (false).
    * @<b>default</b> false
    * @type Boolean
    */</i>
    oConfig.addProperty(
        &quot;visible&quot;,
        {
            value:false,
            handler:<b>this</b>.configVisible,
            validator:<b>this</b>.cfg.checkBoolean
         }
     );

    <i>/*
        Change the <b>default</b> value <b>for</b> the &quot;constraintoviewport&quot; configuration
        property to &quot;true&quot; by re-adding the property.
    */</i>
<i>// holder</i>
<i>/**
    * @config constraintoviewport
    * @description Boolean indicating <b>if</b> the menu will try to remain inside
    * the boundaries of the size of viewport.
    * @<b>default</b> true
    * @type Boolean
    */</i>
    oConfig.addProperty(
        &quot;constraintoviewport&quot;,
        {
            value:true,
            handler:<b>this</b>.configConstrainToViewport,
            validator:<b>this</b>.cfg.checkBoolean,
            supercedes:[&quot;iframe&quot;,&quot;x&quot;,&quot;y&quot;,&quot;xy&quot;]
        }
    );

    <i>/**
    * @config position
    * @description String indicating how a menu should be positioned on the
    * screen.  Possible values are &quot;static&quot; and &quot;dynamic.&quot;  Static menus are
    * visible by <b>default</b> and reside <b>in</b> the normal flow of the document
    * (CSS position: static).  Dynamic menus are hidden by <b>default</b>, reside
    * out of the normal flow of the document (CSS position: absolute), and
    * can overlay other elements on the screen.
    * @<b>default</b> dynamic
    * @type String
    */</i>
    oConfig.addProperty(
        &quot;position&quot;,
        {
            value: &quot;dynamic&quot;,
            handler: <b>this</b>.configPosition,
            validator: <b>this</b>._checkPosition,
            supercedes: [&quot;visible&quot;]
        }
    );

    <i>/**
    * @config submenualignment
    * @description Array defining how submenus should be aligned to their
    * parent menu item. The format is: [itemCorner, submenuCorner]. By <b>default</b>
    * a submenu's top left corner is aligned to its parent menu item's top
    * right corner.
    * @<b>default</b> [&quot;tl&quot;,&quot;tr&quot;]
    * @type Array
    */</i>
    oConfig.addProperty(&quot;submenualignment&quot;, { value: [&quot;tl&quot;,&quot;tr&quot;] } );

    <i>/**
    * @config autosubmenudisplay
    * @description Boolean indicating <b>if</b> submenus are automatically made
    * visible when the user mouses over the menu's items.
    * @<b>default</b> true
    * @type Boolean
    */</i>
	oConfig.addProperty(
	   &quot;autosubmenudisplay&quot;,
	   {
	       value: true,
	       validator: oConfig.checkBoolean
       }
    );

    <i>/**
    * @config showdelay
    * @description Number indicating the time (<b>in</b> milliseconds) that should
    * expire before a submenu is made visible when the user mouses over
    * the menu's items.
    * @<b>default</b> 0
    * @type Number
    */</i>
	oConfig.addProperty(
	   &quot;showdelay&quot;,
	   {
	       value: 0,
	       validator: oConfig.checkNumber
       }
    );

    <i>/**
    * @config hidedelay
    * @description Number indicating the time (<b>in</b> milliseconds) that should
    * expire before the menu is hidden.
    * @<b>default</b> 0
    * @type Number
    */</i>
	oConfig.addProperty(
	   &quot;hidedelay&quot;,
	   {
	       value: 0,
	       validator: oConfig.checkNumber,
	       handler: <b>this</b>.configHideDelay,
	       suppressEvent: true
       }
    );

    <i>/**
    * @config clicktohide
    * @description Boolean indicating <b>if</b> the menu will automatically be
    * hidden <b>if</b> the user clicks outside of it.
    * @<b>default</b> true
    * @type Boolean
    */</i>
    oConfig.addProperty(
        &quot;clicktohide&quot;,
        {
            value: true,
            validator: oConfig.checkBoolean
        }
    );

	<i>/**
	* @config container
	* @description HTML element reference or string specifying the id
	* attribute of the HTML element that the menu's markup should be rendered into.
	* @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
	* level-one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;|String
	* @<b>default</b> document.body
	*/</i>
	<b>this</b>.cfg.addProperty(
	   &quot;container&quot;,
	   { value:document.body, handler:<b>this</b>.configContainer }
   );

}

}); <i>// END YAHOO.extend</i>

})();

<i>/**
* The base class <b>for</b> all menuing containers.
*
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu module.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b> the
* menu module.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929</i>
* /level-one-html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu module.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data
* source <b>for</b> the menu module.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu module. See configuration class documentation <b>for</b>
* more details.
* @class MenuModule
* @constructor
* @extends YAHOO.widget.Overlay
* @deprecated As of version 0.12, all MenuModule functionality has been
* implemented directly <b>in</b> YAHOO.widget.Menu, making YAHOO.widget.Menu the base
* class <b>for</b> all menuing containers.
*/</i>
YAHOO.widget.MenuModule = YAHOO.widget.Menu;

(<b>function</b>() {

<b>var</b> Dom = YAHOO.util.Dom;
<b>var</b> Module = YAHOO.widget.Module;
<b>var</b> Menu = YAHOO.widget.Menu;

<i>/**
* Creates an item <b>for</b> a menu.
*
* @param {String} p_oObject String specifying the text of the menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the menu item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu item. See configuration class documentation
* <b>for</b> more details.
* @class MenuItem
* @constructor
*/</i>
YAHOO.widget.MenuItem = <b>function</b>(p_oObject, p_oConfig) {

    <b>if</b>(p_oObject) {

        <b>if</b>(p_oConfig) {

            <b>this</b>.parent = p_oConfig.parent;
            <b>this</b>.value = p_oConfig.value;

        }

        <b>this</b>.init(p_oObject, p_oConfig);

    }

};

YAHOO.widget.MenuItem.prototype = {

    <i>// Constants</i>

    <i>/**
    * @property SUBMENU_INDICATOR_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b> the
    * menu item's submenu arrow indicator.
    * @<b>default</b> &quot;nt/ic/ut/alt1/menuarorght8_nrm_1.gif&quot;
    * @final
    * @type String
    */</i>
    SUBMENU_INDICATOR_IMAGE_PATH: &quot;nt/ic/ut/alt1/menuarorght8_nrm_1.gif&quot;,

    <i>/**
    * @property SELECTED_SUBMENU_INDICATOR_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b> the
    * submenu arrow indicator when the menu item is selected.
    * @<b>default</b> &quot;nt/ic/ut/alt1/menuarorght8_hov_1.gif&quot;
    * @final
    * @type String
    */</i>
    SELECTED_SUBMENU_INDICATOR_IMAGE_PATH:
        &quot;nt/ic/ut/alt1/menuarorght8_hov_1.gif&quot;,

    <i>/**
    * @property DISABLED_SUBMENU_INDICATOR_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b> the
    * submenu arrow indicator when the menu item is disabled.
    * @<b>default</b> &quot;nt/ic/ut/alt1/menuarorght8_dim_1.gif&quot;
    * @final
    * @type String
    */</i>
    DISABLED_SUBMENU_INDICATOR_IMAGE_PATH:
        &quot;nt/ic/ut/alt1/menuarorght8_dim_1.gif&quot;,

    <i>/**
    * @property COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT
    * @description String representing the alt text <b>for</b> the image to be used
    * <b>for</b> the submenu arrow indicator.
    * @<b>default</b> &quot;Collapsed.  Click to expand.&quot;
    * @final
    * @type String
    */</i>
    COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT: &quot;Collapsed.  Click to expand.&quot;,

    <i>/**
    * @property EXPANDED_SUBMENU_INDICATOR_ALT_TEXT
    * @description String representing the alt text <b>for</b> the image to be used
    * <b>for</b> the submenu arrow indicator when the submenu is visible.
    * @<b>default</b> &quot;Expanded.  Click to collapse.&quot;
    * @final
    * @type String
    */</i>
    EXPANDED_SUBMENU_INDICATOR_ALT_TEXT: &quot;Expanded.  Click to collapse.&quot;,

    <i>/**
    * @property DISABLED_SUBMENU_INDICATOR_ALT_TEXT
    * @description String representing the alt text <b>for</b> the image to be used
    * <b>for</b> the submenu arrow indicator when the menu item is disabled.
    * @<b>default</b> &quot;Disabled.&quot;
    * @final
    * @type String
    */</i>
    DISABLED_SUBMENU_INDICATOR_ALT_TEXT: &quot;Disabled.&quot;,

    <i>/**
    * @property CHECKED_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b>
    * the checked state.
    * @<b>default</b> &quot;nt/ic/ut/bsc/menuchk8_nrm_1.gif&quot;
    * @final
    * @type String
    */</i>
    CHECKED_IMAGE_PATH: &quot;nt/ic/ut/bsc/menuchk8_nrm_1.gif&quot;,


    <i>/**
    * @property SELECTED_CHECKED_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b>
    * the selected checked state.
    * @<b>default</b> &quot;nt/ic/ut/bsc/menuchk8_hov_1.gif&quot;
    * @final
    * @type String
    */</i>
    SELECTED_CHECKED_IMAGE_PATH: &quot;nt/ic/ut/bsc/menuchk8_hov_1.gif&quot;,


    <i>/**
    * @property DISABLED_CHECKED_IMAGE_PATH
    * @description String representing the path to the image to be used <b>for</b>
    * the disabled checked state.
    * @<b>default</b> &quot;nt/ic/ut/bsc/menuchk8_dim_1.gif&quot;
    * @final
    * @type String
    */</i>
    DISABLED_CHECKED_IMAGE_PATH: &quot;nt/ic/ut/bsc/menuchk8_dim_1.gif&quot;,


    <i>/**
    * @property CHECKED_IMAGE_ALT_TEXT
    * @description String representing the alt text <b>for</b> the image to be used
    * <b>for</b> the checked image.
    * @<b>default</b> &quot;Checked.&quot;
    * @final
    * @type String
    */</i>
    CHECKED_IMAGE_ALT_TEXT: &quot;Checked.&quot;,


    <i>/**
    * @property DISABLED_CHECKED_IMAGE_ALT_TEXT
    * @description String representing the alt text <b>for</b> the image to be used
    * <b>for</b> the checked image when the item is disabled.
    * @<b>default</b> &quot;Checked. (Item disabled.)&quot;
    * @final
    * @type String
    */</i>
    DISABLED_CHECKED_IMAGE_ALT_TEXT: &quot;Checked. (Item disabled.)&quot;,

    <i>/**
    * @property CSS_CLASS_NAME
    * @description String representing the CSS class(es) to be applied to the
    * &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu item.
    * @<b>default</b> &quot;yuimenuitem&quot;
    * @final
    * @type String
    */</i>
    CSS_CLASS_NAME: &quot;yuimenuitem&quot;,

    <i>/**
    * @property SUBMENU_TYPE
    * @description Object representing the type of menu to instantiate and
    * add when parsing the child nodes of the menu item's source HTML element.
    * @final
    * @type YAHOO.widget.Menu
    */</i>
    SUBMENU_TYPE: null,

    <i>/**
    * @property IMG_ROOT
    * @description String representing the prefix path to use <b>for</b>
    * non-secure images.
    * @<b>default</b> &quot;http:<i>//us.i1.yimg.com/us.yimg.com/i/&quot;</i>
    * @type String
    */</i>
    IMG_ROOT: &quot;http:<i>//us.i1.yimg.com/us.yimg.com/i/&quot;,</i>


    <i>/**
    * @property IMG_ROOT_SSL
    * @description String representing the prefix path to use <b>for</b> securely
    * served images.
    * @<b>default</b> &quot;https:<i>//a248.e.akamai.net/sec.yimg.com/i/&quot;</i>
    * @type String
    */</i>
    IMG_ROOT_SSL: &quot;https:<i>//a248.e.akamai.net/sec.yimg.com/i/&quot;,</i>

    <i>// Private member variables</i>

    <i>/**
    * @property _oAnchor
    * @description Object reference to the menu item's
    * &lt;code&gt;&amp;#60;a&amp;#62;&lt;/code&gt; element.
    * @<b>default</b> null
    * @private
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-48250443&quot;&gt;HTMLAnchorElement&lt;/a&gt;
    */</i>
    _oAnchor: null,


    <i>/**
    * @property _oText
    * @description Object reference to the menu item's text node.
    * @<b>default</b> null
    * @private
    * @type TextNode
    */</i>
    _oText: null,


    <i>/**
    * @property _oHelpTextEM
    * @description Object reference to the menu item's help text
    * &lt;code&gt;&amp;#60;em&amp;#62;&lt;/code&gt; element.
    * @<b>default</b> null
    * @private
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;
    */</i>
    _oHelpTextEM: null,


    <i>/**
    * @property _oSubmenu
    * @description Object reference to the menu item's submenu.
    * @<b>default</b> null
    * @private
    * @type YAHOO.widget.Menu
    */</i>
    _oSubmenu: null,

    <i>/**
    * @property _checkImage
    * @description Object reference to the menu item's checkmark image.
    * @<b>default</b> null
    * @private
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-17701901&quot;&gt;HTMLImageElement&lt;/a&gt;
    */</i>
    _checkImage: null,

    <i>// Public properties</i>

	<i>/**
    * @property constructor
	* @description Object reference to the menu item's constructor <b>function</b>.
    * @<b>default</b> YAHOO.widget.MenuItem
	* @type YAHOO.widget.MenuItem
	*/</i>
	constructor: YAHOO.widget.MenuItem,

	<i>/**
    * @property imageRoot
	* @description String representing the root path <b>for</b> all of the menu
	* item's images.
	* @type String
	*/</i>
	imageRoot: null,

	<i>/**
    * @property isSecure
	* @description Boolean representing whether or not the current browsing
	* context is secure (HTTPS).
	* @type Boolean
	*/</i>
	isSecure: Module.prototype.isSecure,

    <i>/**
    * @property index
    * @description Number indicating the ordinal position of the menu item <b>in</b>
    * its group.
    * @<b>default</b> null
    * @type Number
    */</i>
    index: null,

    <i>/**
    * @property groupIndex
    * @description Number indicating the index of the group to which the menu
    * item belongs.
    * @<b>default</b> null
    * @type Number
    */</i>
    groupIndex: null,

    <i>/**
    * @property parent
    * @description Object reference to the menu item's parent menu.
    * @<b>default</b> null
    * @type YAHOO.widget.Menu
    */</i>
    parent: null,

    <i>/**
    * @property element
    * @description Object reference to the menu item's
    * &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element.
    * @<b>default</b> &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level</i>
    * -one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;
    */</i>
    element: null,

    <i>/**
    * @property srcElement
    * @description Object reference to the HTML element (either
    * &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt;, &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; or
    * &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt;) used create the menu item.
    * @<b>default</b> &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;|&lt;a href=&quot;http:<i>//www.</i>
    * w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-html.html#ID-38450247&quot;
    * &gt;HTMLOptGroupElement&lt;/a&gt;|&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-</i>
    * Level-1-20000929/level-one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;|&lt;a href=&quot;http:<i>//www.w3.</i>
    * org/TR/2000/WD-DOM-Level-1-20000929/level-one-html.html#ID-38450247&quot;&gt;
    * HTMLOptGroupElement&lt;/a&gt;|&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-</i>
    * Level-1-20000929/level-one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;
    */</i>
    srcElement: null,

    <i>/**
    * @property value
    * @description Object reference to the menu item's value.
    * @<b>default</b> null
    * @type Object
    */</i>
    value: null,

    <i>/**
    * @property submenuIndicator
    * @description Object reference to the &lt;code&gt;&amp;#60;img&amp;#62;&lt;/code&gt; element
    * used to create the submenu indicator <b>for</b> the menu item.
    * @<b>default</b> &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-17701901&quot;&gt;HTMLImageElement&lt;/a&gt;
    * @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-17701901&quot;&gt;HTMLImageElement&lt;/a&gt;
    */</i>
    submenuIndicator: null,

	<i>/**
    * @property browser
	* @description String representing the browser.
	* @type String
	*/</i>
	browser: Module.prototype.browser,

    <i>// Events</i>

    <i>/**
    * @event destroyEvent
    * @description Fires when the menu item's &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt;
    * element is removed from its parent &lt;code&gt;&amp;#60;ul&amp;#62;&lt;/code&gt; element.
    * @type YAHOO.util.CustomEvent
    */</i>
    destroyEvent: null,

    <i>/**
    * @event mouseOverEvent
    * @description Fires when the mouse has entered the menu item.  Passes
    * back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    mouseOverEvent: null,

    <i>/**
    * @event mouseOutEvent
    * @description Fires when the mouse has left the menu item.  Passes back
    * the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    mouseOutEvent: null,

    <i>/**
    * @event mouseDownEvent
    * @description Fires when the user mouses down on the menu item.  Passes
    * back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    mouseDownEvent: null,

    <i>/**
    * @event mouseUpEvent
    * @description Fires when the user releases a mouse button <b>while</b> the mouse
    * is over the menu item.  Passes back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    mouseUpEvent: null,

    <i>/**
    * @event clickEvent
    * @description Fires when the user clicks the on the menu item.  Passes
    * back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    clickEvent: null,

    <i>/**
    * @event keyPressEvent
    * @description Fires when the user presses an alphanumeric key when the
    * menu item has focus.  Passes back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    keyPressEvent: null,

    <i>/**
    * @event keyDownEvent
    * @description Fires when the user presses a key when the menu item has
    * focus.  Passes back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    keyDownEvent: null,

    <i>/**
    * @event keyUpEvent
    * @description Fires when the user releases a key when the menu item has
    * focus.  Passes back the DOM Event object as an argument.
    * @type YAHOO.util.CustomEvent
    */</i>
    keyUpEvent: null,

    <i>/**
    * @event focusEvent
    * @description Fires when the menu item receives focus.
    * @type YAHOO.util.CustomEvent
    */</i>
    focusEvent: null,

    <i>/**
    * @event blurEvent
    * @description Fires when the menu item loses the input focus.
    * @type YAHOO.util.CustomEvent
    */</i>
    blurEvent: null,

    <i>/**
    * @method init
    * @description The MenuItem class's initialization method. This method is
    * automatically called by the constructor, and sets up all DOM references
    * <b>for</b> pre-existing markup, and creates required markup <b>if</b> it is not
    * already present.
    * @param {String} p_oObject String specifying the text of the menu item.
    * @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying
    * the &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu item.
    * @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
    * specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the menu item.
    * @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
    * one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object
    * specifying the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the menu item.
    * @param {Object} p_oConfig Optional. Object literal specifying the
    * configuration <b>for</b> the menu item. See configuration class documentation
    * <b>for</b> more details.
    */</i>
    init: <b>function</b>(p_oObject, p_oConfig) {

        <b>this</b>.imageRoot = (<b>this</b>.isSecure) ? <b>this</b>.IMG_ROOT_SSL : <b>this</b>.IMG_ROOT;

        <b>if</b>(!<b>this</b>.SUBMENU_TYPE) {

            <b>this</b>.SUBMENU_TYPE = Menu;

        }

        <i>// Create the config object</i>

        <b>this</b>.cfg = <b>new</b> YAHOO.util.Config(<b>this</b>);

        <b>this</b>.initDefaultConfig();

        <b>var</b> oConfig = <b>this</b>.cfg;

        <b>if</b>(this._checkString(p_oObject)) {

            <b>this</b>._createRootNodeStructure();

            oConfig.setProperty(&quot;text&quot;, p_oObject);

        }
        <b>else</b> if(<b>this</b>._checkDOMNode(p_oObject)) {

            <b>switch</b>(p_oObject.tagName.toUpperCase()) {

                <b>case</b> &quot;OPTION&quot;:

                    <b>this</b>._createRootNodeStructure();

                    oConfig.setProperty(&quot;text&quot;, p_oObject.text);

                    <b>this</b>.srcElement = p_oObject;

                <b>break</b>;

                <b>case</b> &quot;OPTGROUP&quot;:

                    <b>this</b>._createRootNodeStructure();

                    oConfig.setProperty(&quot;text&quot;, p_oObject.label);

                    <b>this</b>.srcElement = p_oObject;

                    <b>this</b>._initSubTree();

                <b>break</b>;

                <b>case</b> &quot;LI&quot;:

                    <i>// Get the anchor node (<b>if</b> it exists)</i>

                    <b>var</b> oAnchor = <b>this</b>._getFirstElement(p_oObject, &quot;A&quot;);
                    <b>var</b> sURL = &quot;#&quot;;
                    <b>var</b> sTarget = null;
                    <b>var</b> sText = null;

                    <i>// Capture the &quot;text&quot; and/or the &quot;URL&quot;</i>

                    <b>if</b>(oAnchor) {

                        sURL = oAnchor.getAttribute(&quot;href&quot;);
                        sTarget = oAnchor.getAttribute(&quot;target&quot;);

                        <b>if</b>(oAnchor.innerText) {

                            sText = oAnchor.innerText;

                        }
                        <b>else</b> {

                            <b>var</b> oRange = oAnchor.ownerDocument.createRange();

                            oRange.selectNodeContents(oAnchor);

                            sText = oRange.toString();

                        }

                    }
                    <b>else</b> {

                        <b>var</b> oText = p_oObject.firstChild;

                        sText = oText.nodeValue;

                        oAnchor = document.createElement(&quot;a&quot;);

                        oAnchor.setAttribute(&quot;href&quot;, sURL);

                        p_oObject.replaceChild(oAnchor, oText);

                        oAnchor.appendChild(oText);

                    }

                    <b>this</b>.srcElement = p_oObject;
                    <b>this</b>.element = p_oObject;
                    <b>this</b>._oAnchor = oAnchor;


                    <i>// Check <b>if</b> emphasis has been applied to the MenuItem</i>

                    <b>var</b> oEmphasisNode = <b>this</b>._getFirstElement(oAnchor);
                    <b>var</b> bEmphasis = false;
                    <b>var</b> bStrongEmphasis = false;

                    <b>if</b>(oEmphasisNode) {

                        <i>// Set a reference to the text node</i>

                        <b>this</b>._oText = oEmphasisNode.firstChild;

                        <b>switch</b>(oEmphasisNode.tagName.toUpperCase()) {

                            <b>case</b> &quot;EM&quot;:

                                bEmphasis = true;

                            <b>break</b>;

                            <b>case</b> &quot;STRONG&quot;:

                                bStrongEmphasis = true;

                            <b>break</b>;

                        }

                    }
                    <b>else</b> {

                        <i>// Set a reference to the text node</i>

                        <b>this</b>._oText = oAnchor.firstChild;

                    }

                    <i>/*
                        Set these properties silently to sync up the
                        configuration object without making changes to the
                        element's DOM
                    */</i>

                    oConfig.setProperty(&quot;text&quot;, sText, true);
                    oConfig.setProperty(&quot;url&quot;, sURL, true);
                    oConfig.setProperty(&quot;target&quot;, sTarget, true);
                    oConfig.setProperty(&quot;emphasis&quot;, bEmphasis, true);
                    oConfig.setProperty(
                        &quot;strongemphasis&quot;,
                        bStrongEmphasis,
                        true
                    );

                    <b>this</b>._initSubTree();

                <b>break</b>;

            }

        }

        <b>if</b>(this.element) {

            Dom.addClass(<b>this</b>.element, <b>this</b>.CSS_CLASS_NAME);

            <i>// Create custom events</i>

            <b>var</b> CustomEvent = YAHOO.util.CustomEvent;

            <b>this</b>.destroyEvent = <b>new</b> CustomEvent(&quot;destroyEvent&quot;, <b>this</b>);
            <b>this</b>.mouseOverEvent = <b>new</b> CustomEvent(&quot;mouseOverEvent&quot;, <b>this</b>);
            <b>this</b>.mouseOutEvent = <b>new</b> CustomEvent(&quot;mouseOutEvent&quot;, <b>this</b>);
            <b>this</b>.mouseDownEvent = <b>new</b> CustomEvent(&quot;mouseDownEvent&quot;, <b>this</b>);
            <b>this</b>.mouseUpEvent = <b>new</b> CustomEvent(&quot;mouseUpEvent&quot;, <b>this</b>);
            <b>this</b>.clickEvent = <b>new</b> CustomEvent(&quot;clickEvent&quot;, <b>this</b>);
            <b>this</b>.keyPressEvent = <b>new</b> CustomEvent(&quot;keyPressEvent&quot;, <b>this</b>);
            <b>this</b>.keyDownEvent = <b>new</b> CustomEvent(&quot;keyDownEvent&quot;, <b>this</b>);
            <b>this</b>.keyUpEvent = <b>new</b> CustomEvent(&quot;keyUpEvent&quot;, <b>this</b>);
            <b>this</b>.focusEvent = <b>new</b> CustomEvent(&quot;focusEvent&quot;, <b>this</b>);
            <b>this</b>.blurEvent = <b>new</b> CustomEvent(&quot;blurEvent&quot;, <b>this</b>);

            <b>if</b>(p_oConfig) {

                oConfig.applyConfig(p_oConfig);

            }

            oConfig.fireQueue();

        }

    },

    <i>// Private methods</i>

    <i>/**
    * @method _getFirstElement
    * @description Returns an HTML element's first HTML element node.
    * @private
    * @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;} p_oElement Object
    * reference specifying the element to be evaluated.
    * @param {String} p_sTagName Optional. String specifying the tagname of
    * the element to be retrieved.
    * @<b>return</b> {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;}
    */</i>
    _getFirstElement: <b>function</b>(p_oElement, p_sTagName) {

        <b>var</b> oElement;

        <b>if</b>(p_oElement.firstChild &amp;&amp; p_oElement.firstChild.nodeType == 1) {

            oElement = p_oElement.firstChild;

        }
        <b>else</b> if(
            p_oElement.firstChild &amp;&amp;
            p_oElement.firstChild.nextSibling &amp;&amp;
            p_oElement.firstChild.nextSibling.nodeType == 1
        ) {

            oElement = p_oElement.firstChild.nextSibling;

        }

        <b>if</b>(p_sTagName) {

            <b>return</b> (oElement &amp;&amp; oElement.tagName.toUpperCase() == p_sTagName) ?
                oElement : false;

        }

        <b>return</b> oElement;

    },

    <i>/**
    * @method _checkString
    * @description Determines <b>if</b> an object is a string.
    * @private
    * @param {Object} p_oObject Object to be evaluated.
    * @<b>return</b> {Boolean}
    */</i>
    _checkString: <b>function</b>(p_oObject) {

        <b>return</b> (<b>typeof</b> p_oObject == &quot;string&quot;);

    },

    <i>/**
    * @method _checkDOMNode
    * @description Determines <b>if</b> an object is an HTML element.
    * @private
    * @param {Object} p_oObject Object to be evaluated.
    * @<b>return</b> {Boolean}
    */</i>
    _checkDOMNode: <b>function</b>(p_oObject) {

        <b>return</b> (p_oObject &amp;&amp; p_oObject.tagName);

    },

    <i>/**
    * @method _createRootNodeStructure
    * @description Creates the core DOM structure <b>for</b> the menu item.
    * @private
    */</i>
    _createRootNodeStructure: <b>function</b> () {

        <b>this</b>.element = document.createElement(&quot;li&quot;);

        <b>this</b>._oText = document.createTextNode(&quot;&quot;);

        <b>this</b>._oAnchor = document.createElement(&quot;a&quot;);
        <b>this</b>._oAnchor.appendChild(<b>this</b>._oText);

        <b>this</b>.cfg.refireEvent(&quot;url&quot;);

        <b>this</b>.element.appendChild(<b>this</b>._oAnchor);

    },

    <i>/**
    * @method _initSubTree
    * @description Iterates the source element's childNodes collection and uses
    * the child nodes to instantiate other menus.
    * @private
    */</i>
    _initSubTree: <b>function</b>() {

        <b>var</b> oSrcEl = <b>this</b>.srcElement;
        <b>var</b> oConfig = <b>this</b>.cfg;

        <b>if</b>(oSrcEl.childNodes.length &gt; 0) {

            <b>if</b>(
                <b>this</b>.parent.lazyLoad &amp;&amp;
                <b>this</b>.parent.srcElement &amp;&amp;
                <b>this</b>.parent.srcElement.tagName.toUpperCase() == &quot;SELECT&quot;
            ) {

                oConfig.setProperty(
                        &quot;submenu&quot;,
                        { id: Dom.generateId(), itemdata: oSrcEl.childNodes }
                    );

            }
            <b>else</b> {

                <b>var</b> oNode = oSrcEl.firstChild;
                <b>var</b> aOptions = [];

                <b>do</b> {

                    <b>if</b>(oNode &amp;&amp; oNode.tagName) {

                        <b>switch</b>(oNode.tagName.toUpperCase()) {

                            <b>case</b> &quot;DIV&quot;:

                                oConfig.setProperty(&quot;submenu&quot;, oNode);

                            <b>break</b>;

                            <b>case</b> &quot;OPTION&quot;:

                                aOptions[aOptions.length] = oNode;

                            <b>break</b>;

                        }

                    }

                }
                <b>while</b>((oNode = oNode.nextSibling));


                <b>var</b> nOptions = aOptions.length;

                <b>if</b>(nOptions &gt; 0) {

                    <b>var</b> oMenu = <b>new</b> this.SUBMENU_TYPE(Dom.generateId());

                    oConfig.setProperty(&quot;submenu&quot;, oMenu);

                    <b>for</b>(var n=0; n&lt;nOptions; n++) {

                        oMenu.addItem((<b>new</b> oMenu.ITEM_TYPE(aOptions[n])));

                    }

                }

            }

        }

    },

    <i>/**
    * @method _preloadImage
    * @description Preloads an image by creating an image element from the
    * specified path and appending the image to the body of the document.
    * @private
    * @param {String} p_sPath String specifying the path to the image.
    */</i>
    _preloadImage: <b>function</b>(p_sPath) {

        <b>var</b> sPath = <b>this</b>.imageRoot + p_sPath;

        <b>if</b>(!document.images[sPath]) {

            <b>var</b> oImage = document.createElement(&quot;img&quot;);
            oImage.src = sPath;
            oImage.name = sPath;
            oImage.id = sPath;
            oImage.style.display = &quot;none&quot;;

            document.body.appendChild(oImage);

        }

    },

    <i>// Event handlers <b>for</b> configuration properties</i>

    <i>/**
    * @method configText
    * @description Event handler <b>for</b> when the &quot;text&quot; configuration property of
    * the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configText: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> sText = p_aArgs[0];

        <b>if</b>(this._oText) {

            <b>this</b>._oText.nodeValue = sText;

        }

    },

    <i>/**
    * @method configHelpText
    * @description Event handler <b>for</b> when the &quot;helptext&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configHelpText: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> me = <b>this</b>;
        <b>var</b> oHelpText = p_aArgs[0];
        <b>var</b> oEl = <b>this</b>.element;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> aNodes = [oEl, <b>this</b>._oAnchor];
        <b>var</b> oImg = <b>this</b>.submenuIndicator;

        <i>/**
        * Adds the &quot;hashelptext&quot; class to the necessary nodes and refires the
        * &quot;selected&quot; and &quot;disabled&quot; configuration events.
        * @private
        */</i>
        <b>var</b> initHelpText = <b>function</b>() {

            Dom.addClass(aNodes, &quot;hashelptext&quot;);

            <b>if</b>(oConfig.getProperty(&quot;disabled&quot;)) {

                oConfig.refireEvent(&quot;disabled&quot;);

            }

            <b>if</b>(oConfig.getProperty(&quot;selected&quot;)) {

                oConfig.refireEvent(&quot;selected&quot;);

            }

        };

        <i>/**
        * Removes the &quot;hashelptext&quot; class and corresponding DOM element (EM).
        * @private
        */</i>
        <b>var</b> removeHelpText = <b>function</b>() {

            Dom.removeClass(aNodes, &quot;hashelptext&quot;);

            oEl.removeChild(me._oHelpTextEM);
            me._oHelpTextEM = null;

        };

        <b>if</b>(this._checkDOMNode(oHelpText)) {

            <b>if</b>(this._oHelpTextEM) {

                <b>this</b>._oHelpTextEM.parentNode.replaceChild(
                    oHelpText,
                    <b>this</b>._oHelpTextEM
                );

            }
            <b>else</b> {

                <b>this</b>._oHelpTextEM = oHelpText;

                oEl.insertBefore(<b>this</b>._oHelpTextEM, oImg);

            }

            initHelpText();

        }
        <b>else</b> if(<b>this</b>._checkString(oHelpText)) {

            <b>if</b>(oHelpText.length === 0) {

                removeHelpText();

            }
            <b>else</b> {

                <b>if</b>(!<b>this</b>._oHelpTextEM) {

                    <b>this</b>._oHelpTextEM = document.createElement(&quot;em&quot;);

                    oEl.insertBefore(<b>this</b>._oHelpTextEM, oImg);

                }

                <b>this</b>._oHelpTextEM.innerHTML = oHelpText;

                initHelpText();

            }

        }
        <b>else</b> if(!oHelpText &amp;&amp; <b>this</b>._oHelpTextEM) {

            removeHelpText();

        }

    },

    <i>/**
    * @method configURL
    * @description Event handler <b>for</b> when the &quot;url&quot; configuration property of
    * the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configURL: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> sURL = p_aArgs[0];

        <b>if</b>(!sURL) {

            sURL = &quot;#&quot;;

        }

        <b>this</b>._oAnchor.setAttribute(&quot;href&quot;, sURL);

    },

    <i>/**
    * @method configTarget
    * @description Event handler <b>for</b> when the &quot;target&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configTarget: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> sTarget = p_aArgs[0];
        <b>var</b> oAnchor = <b>this</b>._oAnchor;

        <b>if</b>(sTarget &amp;&amp; sTarget.length &gt; 0) {

            oAnchor.setAttribute(&quot;target&quot;, sTarget);

        }
        <b>else</b> {

            oAnchor.removeAttribute(&quot;target&quot;);

        }

    },

    <i>/**
    * @method configEmphasis
    * @description Event handler <b>for</b> when the &quot;emphasis&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configEmphasis: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> bEmphasis = p_aArgs[0];
        <b>var</b> oAnchor = <b>this</b>._oAnchor;
        <b>var</b> oText = <b>this</b>._oText;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> oEM;

        <b>if</b>(bEmphasis &amp;&amp; oConfig.getProperty(&quot;strongemphasis&quot;)) {

            oConfig.setProperty(&quot;strongemphasis&quot;, false);

        }

        <b>if</b>(oAnchor) {

            <b>if</b>(bEmphasis) {

                oEM = document.createElement(&quot;em&quot;);
                oEM.appendChild(oText);

                oAnchor.appendChild(oEM);

            }
            <b>else</b> {

                oEM = <b>this</b>._getFirstElement(oAnchor, &quot;EM&quot;);

                oAnchor.removeChild(oEM);
                oAnchor.appendChild(oText);

            }

        }

    },

    <i>/**
    * @method configStrongEmphasis
    * @description Event handler <b>for</b> when the &quot;strongemphasis&quot; configuration
    * property of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configStrongEmphasis: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> bStrongEmphasis = p_aArgs[0];
        <b>var</b> oAnchor = <b>this</b>._oAnchor;
        <b>var</b> oText = <b>this</b>._oText;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> oStrong;

        <b>if</b>(bStrongEmphasis &amp;&amp; oConfig.getProperty(&quot;emphasis&quot;)) {

            oConfig.setProperty(&quot;emphasis&quot;, false);

        }

        <b>if</b>(oAnchor) {

            <b>if</b>(bStrongEmphasis) {

                oStrong = document.createElement(&quot;strong&quot;);
                oStrong.appendChild(oText);

                oAnchor.appendChild(oStrong);

            }
            <b>else</b> {

                oStrong = <b>this</b>._getFirstElement(oAnchor, &quot;STRONG&quot;);

                oAnchor.removeChild(oStrong);
                oAnchor.appendChild(oText);

            }

        }

    },

    <i>/**
    * @method configChecked
    * @description Event handler <b>for</b> when the &quot;checked&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configChecked: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> bChecked = p_aArgs[0];
        <b>var</b> oEl = <b>this</b>.element;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> oImg;


        <b>if</b>(bChecked) {

            <b>this</b>._preloadImage(<b>this</b>.CHECKED_IMAGE_PATH);
            <b>this</b>._preloadImage(<b>this</b>.SELECTED_CHECKED_IMAGE_PATH);
            <b>this</b>._preloadImage(<b>this</b>.DISABLED_CHECKED_IMAGE_PATH);

            oImg = document.createElement(&quot;img&quot;);
            oImg.src = (<b>this</b>.imageRoot + <b>this</b>.CHECKED_IMAGE_PATH);
            oImg.alt = <b>this</b>.CHECKED_IMAGE_ALT_TEXT;

            <b>var</b> oSubmenu = <b>this</b>.cfg.getProperty(&quot;submenu&quot;);

            <b>if</b>(oSubmenu) {

                oEl.insertBefore(oImg, oSubmenu.element);

            }
            <b>else</b> {

                oEl.appendChild(oImg);

            }

            Dom.addClass([oEl, oImg], &quot;checked&quot;);

            <b>this</b>._checkImage = oImg;

            <b>if</b>(oConfig.getProperty(&quot;disabled&quot;)) {

                oConfig.refireEvent(&quot;disabled&quot;);

            }

            <b>if</b>(oConfig.getProperty(&quot;selected&quot;)) {

                oConfig.refireEvent(&quot;selected&quot;);

            }

        }
        <b>else</b> {

            oImg = <b>this</b>._checkImage;

            Dom.removeClass([oEl, oImg], &quot;checked&quot;);

            <b>if</b>(oImg) {

                oEl.removeChild(oImg);

            }

            <b>this</b>._checkImage = null;

        }

    },

    <i>/**
    * @method configDisabled
    * @description Event handler <b>for</b> when the &quot;disabled&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configDisabled: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> bDisabled = p_aArgs[0];
        <b>var</b> oAnchor = <b>this</b>._oAnchor;
        <b>var</b> aNodes = [<b>this</b>.element, oAnchor];
        <b>var</b> oEM = <b>this</b>._oHelpTextEM;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> oImg;
        <b>var</b> sImgSrc;
        <b>var</b> sImgAlt;

        <b>if</b>(oEM) {

            aNodes[2] = oEM;

        }

        <b>if</b>(this.cfg.getProperty(&quot;checked&quot;)) {

            sImgAlt = <b>this</b>.CHECKED_IMAGE_ALT_TEXT;
            sImgSrc = <b>this</b>.CHECKED_IMAGE_PATH;
            oImg = <b>this</b>._checkImage;

            <b>if</b>(bDisabled) {

                sImgAlt = <b>this</b>.DISABLED_CHECKED_IMAGE_ALT_TEXT;
                sImgSrc = <b>this</b>.DISABLED_CHECKED_IMAGE_PATH;

            }

            oImg.src = document.images[(<b>this</b>.imageRoot + sImgSrc)].src;
            oImg.alt = sImgAlt;

        }

        oImg = <b>this</b>.submenuIndicator;

        <b>if</b>(bDisabled) {

            <b>if</b>(oConfig.getProperty(&quot;selected&quot;)) {

                oConfig.setProperty(&quot;selected&quot;, false);

            }

            oAnchor.removeAttribute(&quot;href&quot;);

            Dom.addClass(aNodes, &quot;disabled&quot;);

            sImgSrc = <b>this</b>.DISABLED_SUBMENU_INDICATOR_IMAGE_PATH;
            sImgAlt = <b>this</b>.DISABLED_SUBMENU_INDICATOR_ALT_TEXT;

        }
        <b>else</b> {

            oAnchor.setAttribute(&quot;href&quot;, oConfig.getProperty(&quot;url&quot;));

            Dom.removeClass(aNodes, &quot;disabled&quot;);

            sImgSrc = <b>this</b>.SUBMENU_INDICATOR_IMAGE_PATH;
            sImgAlt = <b>this</b>.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;

        }

        <b>if</b>(oImg) {

            oImg.src = <b>this</b>.imageRoot + sImgSrc;
            oImg.alt = sImgAlt;

        }

    },

    <i>/**
    * @method configSelected
    * @description Event handler <b>for</b> when the &quot;selected&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configSelected: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>if</b>(!<b>this</b>.cfg.getProperty(&quot;disabled&quot;)) {

            <b>var</b> bSelected = p_aArgs[0];
            <b>var</b> oEM = <b>this</b>._oHelpTextEM;
            <b>var</b> aNodes = [<b>this</b>.element, <b>this</b>._oAnchor];
            <b>var</b> oImg = <b>this</b>.submenuIndicator;
            <b>var</b> sImgSrc;

            <b>if</b>(oEM) {

                aNodes[aNodes.length] = oEM;

            }

            <b>if</b>(oImg) {

                aNodes[aNodes.length] = oImg;

            }


            <b>if</b>(this.cfg.getProperty(&quot;checked&quot;)) {

                sImgSrc = <b>this</b>.imageRoot + (bSelected ?
                    <b>this</b>.SELECTED_CHECKED_IMAGE_PATH : <b>this</b>.CHECKED_IMAGE_PATH);

                <b>this</b>._checkImage.src = document.images[sImgSrc].src;

            }

            <b>if</b>(bSelected) {

                Dom.addClass(aNodes, &quot;selected&quot;);
                sImgSrc = <b>this</b>.SELECTED_SUBMENU_INDICATOR_IMAGE_PATH;

            }
            <b>else</b> {

                Dom.removeClass(aNodes, &quot;selected&quot;);
                sImgSrc = <b>this</b>.SUBMENU_INDICATOR_IMAGE_PATH;

            }

            <b>if</b>(oImg) {

                oImg.src = document.images[(<b>this</b>.imageRoot + sImgSrc)].src;

            }

        }

    },

    <i>/**
    * @method configSubmenu
    * @description Event handler <b>for</b> when the &quot;submenu&quot; configuration property
    * of the menu item changes.
    * @param {String} p_sType String representing the name of the event that
    * was fired.
    * @param {Array} p_aArgs Array of arguments sent when the event was fired.
    * @param {YAHOO.widget.MenuItem} p_oItem Object representing the menu item
    * that fired the event.
    */</i>
    configSubmenu: <b>function</b>(p_sType, p_aArgs, p_oItem) {

        <b>var</b> oEl = <b>this</b>.element;
        <b>var</b> oSubmenu = p_aArgs[0];
        <b>var</b> oImg = <b>this</b>.submenuIndicator;
        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> aNodes = [<b>this</b>.element, <b>this</b>._oAnchor];
        <b>var</b> oMenu;
        <b>var</b> bLazyLoad = <b>this</b>.parent &amp;&amp; <b>this</b>.parent.lazyLoad;

        <b>if</b>(oSubmenu) {

            <b>if</b>(oSubmenu instanceof Menu) {

                oMenu = oSubmenu;
                oMenu.parent = <b>this</b>;
                oMenu.lazyLoad = bLazyLoad;

            }
            <b>else</b> if(
                <b>typeof</b> oSubmenu == &quot;object&quot; &amp;&amp;
                oSubmenu.id &amp;&amp;
                !oSubmenu.nodeType
            ) {

                <b>var</b> sSubmenuId = oSubmenu.id;
                <b>var</b> oSubmenuConfig = oSubmenu;

                <b>delete</b> oSubmenu[&quot;id&quot;];

                oSubmenuConfig.lazyload = bLazyLoad;
                oSubmenuConfig.parent = <b>this</b>;

                oMenu = <b>new</b> this.SUBMENU_TYPE(sSubmenuId, oSubmenuConfig);

                <i>// Set the value of the property to the Menu instance</i>

                <b>this</b>.cfg.setProperty(&quot;submenu&quot;, oMenu, true);

            }
            <b>else</b> {

                oMenu = <b>new</b> this.SUBMENU_TYPE(
                                oSubmenu,
                                { lazyload: bLazyLoad, parent: <b>this</b> }
                            );

                <i>// Set the value of the property to the Menu instance</i>

                <b>this</b>.cfg.setProperty(&quot;submenu&quot;, oMenu, true);

            }

            <b>if</b>(oMenu) {

                <b>this</b>._oSubmenu = oMenu;

                <b>if</b>(!oImg) {

                    <b>this</b>._preloadImage(<b>this</b>.SUBMENU_INDICATOR_IMAGE_PATH);
                    <b>this</b>._preloadImage(
                            <b>this</b>.SELECTED_SUBMENU_INDICATOR_IMAGE_PATH
                        );

                    <b>this</b>._preloadImage(
                            <b>this</b>.DISABLED_SUBMENU_INDICATOR_IMAGE_PATH
                        );

                    oImg = document.createElement(&quot;img&quot;);

                    oImg.src =
                        (<b>this</b>.imageRoot + <b>this</b>.SUBMENU_INDICATOR_IMAGE_PATH);

                    oImg.alt = <b>this</b>.COLLAPSED_SUBMENU_INDICATOR_ALT_TEXT;

                    oEl.appendChild(oImg);

                    <b>this</b>.submenuIndicator = oImg;

                    Dom.addClass(aNodes, &quot;hassubmenu&quot;);

                    <b>if</b>(oConfig.getProperty(&quot;disabled&quot;)) {

                        oConfig.refireEvent(&quot;disabled&quot;);

                    }

                    <b>if</b>(oConfig.getProperty(&quot;selected&quot;)) {

                        oConfig.refireEvent(&quot;selected&quot;);

                    }

                }

            }

        }
        <b>else</b> {

            Dom.removeClass(aNodes, &quot;hassubmenu&quot;);

            <b>if</b>(oImg) {

                oEl.removeChild(oImg);

            }

            <b>if</b>(this._oSubmenu) {

                <b>this</b>._oSubmenu.destroy();

            }

        }

    },

    <i>// Public methods</i>

	<i>/**
    * @method initDefaultConfig
	* @description Initializes an item's configurable properties.
	*/</i>
	initDefaultConfig : <b>function</b>() {

        <b>var</b> oConfig = <b>this</b>.cfg;
        <b>var</b> CheckBoolean = oConfig.checkBoolean;

        <i>// Define the config properties</i>

        <i>/**
        * @config text
        * @description String specifying the text label <b>for</b> the menu item.
        * When building a menu from existing HTML the value of <b>this</b> property
        * will be interpreted from the menu's markup.
        * @<b>default</b> &quot;&quot;
        * @type String
        */</i>
        oConfig.addProperty(
            &quot;text&quot;,
            {
                value: &quot;&quot;,
                handler: <b>this</b>.configText,
                validator: <b>this</b>._checkString,
                suppressEvent: true
            }
        );


        <i>/**
        * @config helptext
        * @description String specifying additional instructional text to
        * accompany the text <b>for</b> the nenu item.
        * @<b>default</b> null
        * @type String|&lt;a href=&quot;http:<i>//www.w3.org/TR/</i>
        * 2000/WD-DOM-Level-1-20000929/level-one-html.html#ID-58190037&quot;&gt;
        * HTMLElement&lt;/a&gt;
        */</i>
        oConfig.addProperty(&quot;helptext&quot;, { handler: <b>this</b>.configHelpText });

        <i>/**
        * @config url
        * @description String specifying the URL <b>for</b> the menu item's anchor's
        * &quot;href&quot; attribute.  When building a menu from existing HTML the value
        * of <b>this</b> property will be interpreted from the menu's markup.
        * @<b>default</b> &quot;#&quot;
        * @type String
        */</i>
        oConfig.addProperty(
            &quot;url&quot;,
            { value: &quot;#&quot;, handler: <b>this</b>.configURL, suppressEvent: true }
        );

        <i>/**
        * @config target
        * @description String specifying the value <b>for</b> the &quot;target&quot; attribute
        * of the menu item's anchor element. &lt;strong&gt;Specifying a target will
        * require the user to click directly on the menu item's anchor node <b>in</b>
        * order to cause the browser to navigate to the specified URL.&lt;/strong&gt;
        * When building a menu from existing HTML the value of <b>this</b> property
        * will be interpreted from the menu's markup.
        * @<b>default</b> null
        * @type String
        */</i>
        oConfig.addProperty(
            &quot;target&quot;,
            { handler: <b>this</b>.configTarget, suppressEvent: true }
        );

        <i>/**
        * @config emphasis
        * @description Boolean indicating <b>if</b> the text of the menu item will be
        * rendered <b>with</b> emphasis.  When building a menu from existing HTML the
        * value of <b>this</b> property will be interpreted from the menu's markup.
        * @<b>default</b> false
        * @type Boolean
        */</i>
        oConfig.addProperty(
            &quot;emphasis&quot;,
            {
                value: false,
                handler: <b>this</b>.configEmphasis,
                validator: CheckBoolean,
                suppressEvent: true
            }
        );

        <i>/**
        * @config strongemphasis
        * @description Boolean indicating <b>if</b> the text of the menu item will be
        * rendered <b>with</b> strong emphasis.  When building a menu from existing
        * HTML the value of <b>this</b> property will be interpreted from the
        * menu's markup.
        * @<b>default</b> false
        * @type Boolean
        */</i>
        oConfig.addProperty(
            &quot;strongemphasis&quot;,
            {
                value: false,
                handler: <b>this</b>.configStrongEmphasis,
                validator: CheckBoolean,
                suppressEvent: true
            }
        );

        <i>/**
        * @config checked
        * @description Boolean indicating <b>if</b> the menu item should be rendered
        * <b>with</b> a checkmark.
        * @<b>default</b> false
        * @type Boolean
        */</i>
        oConfig.addProperty(
            &quot;checked&quot;,
            {
                value: false,
                handler: <b>this</b>.configChecked,
                validator: <b>this</b>.cfg.checkBoolean,
                suppressEvent: true,
                supercedes:[&quot;disabled&quot;]
            }
        );

        <i>/**
        * @config disabled
        * @description Boolean indicating <b>if</b> the menu item should be disabled.
        * (Disabled menu items are  dimmed and will not respond to user input
        * or fire events.)
        * @<b>default</b> false
        * @type Boolean
        */</i>
        oConfig.addProperty(
            &quot;disabled&quot;,
            {
                value: false,
                handler: <b>this</b>.configDisabled,
                validator: CheckBoolean,
                suppressEvent: true
            }
        );

        <i>/**
        * @config selected
        * @description Boolean indicating <b>if</b> the menu item should
        * be highlighted.
        * @<b>default</b> false
        * @type Boolean
        */</i>
        oConfig.addProperty(
            &quot;selected&quot;,
            {
                value: false,
                handler: <b>this</b>.configSelected,
                validator: CheckBoolean,
                suppressEvent: true
            }
        );

        <i>/**
        * @config submenu
        * @description Object specifying the submenu to be appended to the
        * menu item.  The value can be one of the following: &lt;ul&gt;&lt;li&gt;Object
        * specifying a Menu instance.&lt;/li&gt;&lt;li&gt;Object literal specifying the
        * menu to be created.  Format: &lt;code&gt;{ id: [menu id], itemdata:
        * [&lt;a href=&quot;YAHOO.widget.Menu.html#itemData&quot;&gt;array of values <b>for</b>
        * items&lt;/a&gt;] }&lt;/code&gt;.&lt;/li&gt;&lt;li&gt;String specifying the id attribute
        * of the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu.&lt;/li&gt;&lt;li&gt;
        * Object specifying the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the
        * menu.&lt;/li&gt;&lt;/ul&gt;
        * @<b>default</b> null
        * @type Menu|String|Object|&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/</i>
        * WD-DOM-Level-1-20000929/level-one-html.html#ID-58190037&quot;&gt;
        * HTMLElement&lt;/a&gt;
        */</i>
        oConfig.addProperty(&quot;submenu&quot;, { handler: <b>this</b>.configSubmenu });

	},

    <i>/**
    * @method getNextEnabledSibling
    * @description Finds the menu item's next enabled sibling.
    * @<b>return</b> YAHOO.widget.MenuItem
    */</i>
    getNextEnabledSibling: <b>function</b>() {

        <b>if</b>(this.parent instanceof Menu) {

            <b>var</b> nGroupIndex = <b>this</b>.groupIndex;

            <i>/**
            * Finds the next item <b>in</b> an array.
            * @private
            * @param {p_aArray} Array to search.
            * @param {p_nStartIndex} Number indicating the index to
            * start searching the array.
            * @<b>return</b> {Object}
            */</i>
            <b>var</b> getNextArrayItem = <b>function</b>(p_aArray, p_nStartIndex) {

                <b>return</b> p_aArray[p_nStartIndex] ||
                    getNextArrayItem(p_aArray, (p_nStartIndex+1));

            };


            <b>var</b> aItemGroups = <b>this</b>.parent.getItemGroups();
            <b>var</b> oNextItem;


            <b>if</b>(this.index &lt; (aItemGroups[nGroupIndex].length - 1)) {

                oNextItem = getNextArrayItem(
                        aItemGroups[nGroupIndex],
                        (<b>this</b>.index+1)
                    );

            }
            <b>else</b> {

                <b>var</b> nNextGroupIndex;

                <b>if</b>(nGroupIndex &lt; (aItemGroups.length - 1)) {

                    nNextGroupIndex = nGroupIndex + 1;

                }
                <b>else</b> {

                    nNextGroupIndex = 0;

                }

                <b>var</b> aNextGroup = getNextArrayItem(aItemGroups, nNextGroupIndex);

                <i>// Retrieve the first menu item <b>in</b> the next group</i>

                oNextItem = getNextArrayItem(aNextGroup, 0);

            }

            <b>return</b> (
                oNextItem.cfg.getProperty(&quot;disabled&quot;) ||
                oNextItem.element.style.display == &quot;none&quot;
            ) ?
            oNextItem.getNextEnabledSibling() : oNextItem;

        }

    },

    <i>/**
    * @method getPreviousEnabledSibling
    * @description Finds the menu item's previous enabled sibling.
    * @<b>return</b> {YAHOO.widget.MenuItem}
    */</i>
    getPreviousEnabledSibling: <b>function</b>() {

        <b>if</b>(this.parent instanceof Menu) {

            <b>var</b> nGroupIndex = <b>this</b>.groupIndex;

            <i>/**
            * Returns the previous item <b>in</b> an array
            * @private
            * @param {p_aArray} Array to search.
            * @param {p_nStartIndex} Number indicating the index to
            * start searching the array.
            * @<b>return</b> {Object}
            */</i>
            <b>var</b> getPreviousArrayItem = <b>function</b>(p_aArray, p_nStartIndex) {

                <b>return</b> p_aArray[p_nStartIndex] ||
                    getPreviousArrayItem(p_aArray, (p_nStartIndex-1));

            };

            <i>/**
            * Get the index of the first item <b>in</b> an array
            * @private
            * @param {p_aArray} Array to search.
            * @param {p_nStartIndex} Number indicating the index to
            * start searching the array.
            * @<b>return</b> {Object}
            */</i>
            <b>var</b> getFirstItemIndex = <b>function</b>(p_aArray, p_nStartIndex) {

                <b>return</b> p_aArray[p_nStartIndex] ?
                    p_nStartIndex :
                    getFirstItemIndex(p_aArray, (p_nStartIndex+1));

            };

            <b>var</b> aItemGroups = <b>this</b>.parent.getItemGroups();
            <b>var</b> oPreviousItem;

            <b>if</b>(
                <b>this</b>.index &gt; getFirstItemIndex(aItemGroups[nGroupIndex], 0)
            ) {

                oPreviousItem =
                    getPreviousArrayItem(
                        aItemGroups[nGroupIndex],
                        (<b>this</b>.index-1)
                    );

            }
            <b>else</b> {

                <b>var</b> nPreviousGroupIndex;

                <b>if</b>(nGroupIndex &gt; getFirstItemIndex(aItemGroups, 0)) {

                    nPreviousGroupIndex = nGroupIndex - 1;

                }
                <b>else</b> {

                    nPreviousGroupIndex = aItemGroups.length - 1;

                }

                <b>var</b> aPreviousGroup =
                        getPreviousArrayItem(aItemGroups, nPreviousGroupIndex);

                oPreviousItem =
                    getPreviousArrayItem(
                        aPreviousGroup,
                        (aPreviousGroup.length - 1)
                    );

            }

            <b>return</b> (
                oPreviousItem.cfg.getProperty(&quot;disabled&quot;) ||
                oPreviousItem.element.style.display == &quot;none&quot;
            ) ?
            oPreviousItem.getPreviousEnabledSibling() : oPreviousItem;

        }

    },

    <i>/**
    * @method focus
    * @description Causes the menu item to receive the focus and fires the
    * focus event.
    */</i>
    focus: <b>function</b>() {

        <b>var</b> oParent = <b>this</b>.parent;
        <b>var</b> oAnchor = <b>this</b>._oAnchor;
        <b>var</b> oActiveItem = oParent.activeItem;

        <b>if</b>(
            !<b>this</b>.cfg.getProperty(&quot;disabled&quot;) &amp;&amp;
            oParent &amp;&amp;
            oParent.cfg.getProperty(&quot;visible&quot;) &amp;&amp;
            <b>this</b>.element.style.display != &quot;none&quot;
        ) {

            <b>if</b>(oActiveItem) {

                oActiveItem.blur();

            }

            try {

                oAnchor.focus();

            }
            catch(e) {

            }

            <b>this</b>.focusEvent.fire();

        }

    },

    <i>/**
    * @method blur
    * @description Causes the menu item to lose focus and fires the
    * onblur event.
    */</i>
    blur: <b>function</b>() {

        <b>var</b> oParent = <b>this</b>.parent;

        <b>if</b>(
            !<b>this</b>.cfg.getProperty(&quot;disabled&quot;) &amp;&amp;
            oParent &amp;&amp;
            Dom.getStyle(oParent.element, &quot;visibility&quot;) == &quot;visible&quot;
        ) {

            <b>this</b>._oAnchor.blur();

            <b>this</b>.blurEvent.fire();

        }

    },

	<i>/**
    * @method destroy
	* @description Removes the menu item's &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element
	* from its parent &lt;code&gt;&amp;#60;ul&amp;#62;&lt;/code&gt; element.
	*/</i>
    destroy: <b>function</b>() {

        <b>var</b> oEl = <b>this</b>.element;

        <b>if</b>(oEl) {

            <i>// Remove CustomEvent listeners</i>

            <b>this</b>.mouseOverEvent.unsubscribeAll();
            <b>this</b>.mouseOutEvent.unsubscribeAll();
            <b>this</b>.mouseDownEvent.unsubscribeAll();
            <b>this</b>.mouseUpEvent.unsubscribeAll();
            <b>this</b>.clickEvent.unsubscribeAll();
            <b>this</b>.keyPressEvent.unsubscribeAll();
            <b>this</b>.keyDownEvent.unsubscribeAll();
            <b>this</b>.keyUpEvent.unsubscribeAll();
            <b>this</b>.focusEvent.unsubscribeAll();
            <b>this</b>.blurEvent.unsubscribeAll();
            <b>this</b>.cfg.configChangedEvent.unsubscribeAll();

            <i>// Remove the element from the parent node</i>

            <b>var</b> oParentNode = oEl.parentNode;

            <b>if</b>(oParentNode) {

                oParentNode.removeChild(oEl);

                <b>this</b>.destroyEvent.fire();

            }

            <b>this</b>.destroyEvent.unsubscribeAll();

        }

    },

    <i>/**
    * @method toString
    * @description Returns a string representing the menu item.
    * @<b>return</b> {String}
    */</i>
    toString: <b>function</b>() {

        <b>return</b> (&quot;MenuItem: &quot; + <b>this</b>.cfg.getProperty(&quot;text&quot;));

    }

};

})();

<i>/**
* Creates an item <b>for</b> a menu module.
*
* @param {String} p_oObject String specifying the text of the menu module item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu module item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the menu module item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the menu module item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu module item. See configuration class documentation
* <b>for</b> more details.
* @class MenuModuleItem
* @constructor
* @deprecated As of version 0.12, all MenuModuleItem functionality has been
* implemented directly <b>in</b> YAHOO.widget.MenuItem, making YAHOO.widget.MenuItem
* the base class <b>for</b> all menu items.
*/</i>
YAHOO.widget.MenuModuleItem = YAHOO.widget.MenuItem;

<i>/**
* Creates a list of options or commands which are made visible <b>in</b> response to
* an HTML element's &quot;contextmenu&quot; event (&quot;mousedown&quot; <b>for</b> Opera).
*
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the context menu.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b> the
* context menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object specifying the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the context menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement Object specifying
* the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b>
* the context menu.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the context menu. See configuration class documentation
* <b>for</b> more details.
* @class ContextMenu
* @constructor
* @extends YAHOO.widget.Menu
* @namespace YAHOO.widget
*/</i>
YAHOO.widget.ContextMenu = <b>function</b>(p_oElement, p_oConfig) {

    YAHOO.widget.ContextMenu.superclass.constructor.call(
            <b>this</b>,
            p_oElement,
            p_oConfig
        );

};

YAHOO.extend(YAHOO.widget.ContextMenu, YAHOO.widget.Menu, {

<i>// Private properties</i>

<i>/**
* @property _oTrigger
* @description Object reference to the current value of the &quot;trigger&quot;
* configuration property.
* @<b>default</b> null
* @private
* @type String|&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/leve</i>
* l-one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;|Array
*/</i>
_oTrigger: null,

<i>// Public properties</i>

<i>/**
* @property contextEventTarget
* @description Object reference <b>for</b> the HTML element that was the target of the
* &quot;contextmenu&quot; DOM event (&quot;mousedown&quot; <b>for</b> Opera) that triggered the display of
* the context menu.
* @<b>default</b> null
* @type &lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;
*/</i>
contextEventTarget: null,

<i>/**
* @method init
* @description The ContextMenu class's initialization method. This method is
* automatically called by the constructor, and sets up all DOM references <b>for</b>
* pre-existing markup, and creates required markup <b>if</b> it is not already present.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the context menu.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b>
* the context menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object specifying the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the context menu.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-one-</i>
* html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement Object specifying
* the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b>
* the context menu.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the context menu. See configuration class documentation
* <b>for</b> more details.
*/</i>
init: <b>function</b>(p_oElement, p_oConfig) {

    <b>if</b>(!<b>this</b>.ITEM_TYPE) {

        <b>this</b>.ITEM_TYPE = YAHOO.widget.ContextMenuItem;

    }

    <i>// Call the init of the superclass (YAHOO.widget.Menu)</i>

    YAHOO.widget.ContextMenu.superclass.init.call(<b>this</b>, p_oElement);

    <b>this</b>.beforeInitEvent.fire(YAHOO.widget.ContextMenu);

    <b>if</b>(p_oConfig) {

        <b>this</b>.cfg.applyConfig(p_oConfig, true);

    }


    <b>this</b>.initEvent.fire(YAHOO.widget.ContextMenu);

},

<i>// Private methods</i>

<i>/**
* @method _removeEventHandlers
* @description Removes all of the DOM event handlers from the HTML element(s)
* whose &quot;context menu&quot; event (&quot;click&quot; <b>for</b> Opera) trigger the display of
* the context menu.
* @private
*/</i>
_removeEventHandlers: <b>function</b>() {

    <b>var</b> Event = YAHOO.util.Event;
    <b>var</b> oTrigger = <b>this</b>._oTrigger;
    <b>var</b> bOpera = (<b>this</b>.browser == &quot;opera&quot;);

    <i>// Remove the event handlers from the trigger(s)</i>

    Event.removeListener(
        oTrigger,
        (bOpera ? &quot;mousedown&quot; : &quot;contextmenu&quot;),
        <b>this</b>._onTriggerContextMenu
    );

    <b>if</b>(bOpera) {

        Event.removeListener(oTrigger, &quot;click&quot;, <b>this</b>._onTriggerClick);

    }

},

<i>// Private event handlers</i>

<i>/**
* @method _onTriggerClick
* @description &quot;click&quot; event handler <b>for</b> the HTML element(s) identified as the
* &quot;trigger&quot; <b>for</b> the context menu.  Used to cancel <b>default</b> behaviors <b>in</b> Opera.
* @private
* @param {Event} p_oEvent Object representing the DOM event object passed back
* by the event utility (YAHOO.util.Event).
* @param {YAHOO.widget.ContextMenu} p_oMenu Object representing the context
* menu that is handling the event.
*/</i>
_onTriggerClick: <b>function</b>(p_oEvent, p_oMenu) {

    <b>if</b>(p_oEvent.ctrlKey) {

        YAHOO.util.Event.stopEvent(p_oEvent);

    }

},

<i>/**
* @method _onTriggerContextMenu
* @description &quot;contextmenu&quot; event handler (&quot;mousedown&quot; <b>for</b> Opera) <b>for</b> the HTML
* element(s) that trigger the display of the context menu.
* @private
* @param {Event} p_oEvent Object representing the DOM event object passed back
* by the event utility (YAHOO.util.Event).
* @param {YAHOO.widget.ContextMenu} p_oMenu Object representing the context
* menu that is handling the event.
*/</i>
_onTriggerContextMenu: <b>function</b>(p_oEvent, p_oMenu) {

    <i>// Hide any other ContextMenu instances that might be visible</i>

    YAHOO.widget.MenuManager.hideVisible();

    <b>var</b> Event = YAHOO.util.Event;
    <b>var</b> oConfig = <b>this</b>.cfg;

    <b>if</b>(p_oEvent.type == &quot;mousedown&quot; &amp;&amp; !p_oEvent.ctrlKey) {

        <b>return</b>;

    }

    <b>this</b>.contextEventTarget = Event.getTarget(p_oEvent);

    <i>// Position and display the context menu</i>

    <b>var</b> nX = Event.getPageX(p_oEvent);
    <b>var</b> nY = Event.getPageY(p_oEvent);

    oConfig.applyConfig( { xy:[nX, nY], visible:true } );
    oConfig.fireQueue();

    <i>/*
        Prevent the browser's <b>default</b> context menu from appearing and
        stop the propagation of the &quot;contextmenu&quot; event so that
        other ContextMenu instances are not displayed.
    */</i>

    Event.stopEvent(p_oEvent);

},

<i>// Public methods</i>

<i>/**
* @method toString
* @description Returns a string representing the context menu.
* @<b>return</b> {String}
*/</i>
toString: <b>function</b>() {

    <b>return</b> (&quot;ContextMenu &quot; + <b>this</b>.id);

},

<i>/**
* @method initDefaultConfig
* @description Initializes the class's configurable properties which can be
* changed using the context menu's Config object (&quot;cfg&quot;).
*/</i>
initDefaultConfig: <b>function</b>() {

    YAHOO.widget.ContextMenu.superclass.initDefaultConfig.call(<b>this</b>);

    <i>/**
    * @config trigger
    * @description The HTML element(s) whose &quot;contextmenu&quot; event (&quot;mousedown&quot;
    * <b>for</b> Opera) trigger the display of the context menu.  Can be a string
    * representing the id attribute of the HTML element, an object reference
    * <b>for</b> the HTML element, or an array of strings or HTML element references.
    * @<b>default</b> null
    * @type String|&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/</i>
    * level-one-html.html#ID-58190037&quot;&gt;HTMLElement&lt;/a&gt;|Array
    */</i>
    <b>this</b>.cfg.addProperty(&quot;trigger&quot;, { handler: <b>this</b>.configTrigger });

},

<i>/**
* @method destroy
* @description Removes the context menu's &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element
* (and accompanying child nodes) from the document.
*/</i>
destroy: <b>function</b>() {

    <i>// Remove the DOM event handlers from the current trigger(s)</i>

    <b>this</b>._removeEventHandlers();


    <i>// Continue <b>with</b> the superclass implementation of <b>this</b> method</i>

    YAHOO.widget.ContextMenu.superclass.destroy.call(<b>this</b>);

},

<i>// Public event handlers <b>for</b> configuration properties</i>

<i>/**
* @method configTrigger
* @description Event handler <b>for</b> when the value of the &quot;trigger&quot; configuration
* property changes.
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.ContextMenu} p_oMenu Object representing the context
* menu that fired the event.
*/</i>
configTrigger: <b>function</b>(p_sType, p_aArgs, p_oMenu) {

    <b>var</b> Event = YAHOO.util.Event;
    <b>var</b> oTrigger = p_aArgs[0];

    <b>if</b>(oTrigger) {

        <i>/*
            If there is a current &quot;trigger&quot; - remove the event handlers
            from that element(s) before assigning <b>new</b> ones
        */</i>

        <b>if</b>(this._oTrigger) {

            <b>this</b>._removeEventHandlers();

        }

        <b>this</b>._oTrigger = oTrigger;

        <i>/*
            Listen <b>for</b> the &quot;mousedown&quot; event <b>in</b> Opera b/c it does not
            support the &quot;contextmenu&quot; event
        */</i>

        <b>var</b> bOpera = (<b>this</b>.browser == &quot;opera&quot;);

        Event.addListener(
            oTrigger,
            (bOpera ? &quot;mousedown&quot; : &quot;contextmenu&quot;),
            <b>this</b>._onTriggerContextMenu,
            <b>this</b>,
            true
        );

        <i>/*
            Assign a &quot;click&quot; event handler to the trigger element(s) <b>for</b>
            Opera to prevent <b>default</b> browser behaviors.
        */</i>

        <b>if</b>(bOpera) {

            Event.addListener(
                oTrigger,
                &quot;click&quot;,
                <b>this</b>._onTriggerClick,
                <b>this</b>,
                true
            );

        }

    }
    <b>else</b> {

        <b>this</b>._removeEventHandlers();

    }

}

}); <i>// END YAHOO.extend</i>

<i>/**
* Creates an item <b>for</b> a context menu.
*
* @param {String} p_oObject String specifying the text of the context menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the context menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the context
* menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the context menu item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the context menu item. See configuration class
* documentation <b>for</b> more details.
* @class ContextMenuItem
* @constructor
* @extends YAHOO.widget.MenuItem
*/</i>
YAHOO.widget.ContextMenuItem = <b>function</b>(p_oObject, p_oConfig) {

    YAHOO.widget.ContextMenuItem.superclass.constructor.call(
        <b>this</b>,
        p_oObject,
        p_oConfig
    );

};

YAHOO.extend(YAHOO.widget.ContextMenuItem, YAHOO.widget.MenuItem, {

<i>/**
* @method init
* @description The ContextMenuItem class's initialization method. This method
* is automatically called by the constructor, and sets up all DOM references
* <b>for</b> pre-existing markup, and creates required markup <b>if</b> it is not
* already present.
* @param {String} p_oObject String specifying the text of the context menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the context menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the context
* menu item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the context menu item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the context menu item. See configuration class
* documentation <b>for</b> more details.
*/</i>
init: <b>function</b>(p_oObject, p_oConfig) {

    <b>if</b>(!<b>this</b>.SUBMENU_TYPE) {

        <b>this</b>.SUBMENU_TYPE = YAHOO.widget.ContextMenu;

    }

    <i>/*
        Call the init of the superclass (YAHOO.widget.MenuItem)
        Note: We don't pass the user config <b>in</b> here yet
        because we only want it executed once, at the lowest
        subclass level.
    */</i>

    YAHOO.widget.ContextMenuItem.superclass.init.call(<b>this</b>, p_oObject);

    <b>var</b> oConfig = <b>this</b>.cfg;

    <b>if</b>(p_oConfig) {

        oConfig.applyConfig(p_oConfig, true);

    }

    oConfig.fireQueue();

},

<i>// Public methods</i>

<i>/**
* @method toString
* @description Returns a string representing the context menu item.
* @<b>return</b> {String}
*/</i>
toString: <b>function</b>() {

    <b>return</b> (&quot;MenuBarItem: &quot; + <b>this</b>.cfg.getProperty(&quot;text&quot;));

}

}); <i>// END YAHOO.extend</i>

<i>/**
* Horizontal collection of items, each of which can contain a submenu.
*
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu bar.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b> the
* menu bar.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object specifying
* the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu bar.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data
* source <b>for</b> the menu bar.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu bar. See configuration class documentation <b>for</b>
* more details.
* @class Menubar
* @constructor
* @extends YAHOO.widget.Menu
* @namespace YAHOO.widget
*/</i>
YAHOO.widget.MenuBar = <b>function</b>(p_oElement, p_oConfig) {

    YAHOO.widget.MenuBar.superclass.constructor.call(
            <b>this</b>,
            p_oElement,
            p_oConfig
        );

};

YAHOO.extend(YAHOO.widget.MenuBar, YAHOO.widget.Menu, {

<i>/**
* @method init
* @description The MenuBar class's initialization method. This method is
* automatically called by the constructor, and sets up all DOM references <b>for</b>
* pre-existing markup, and creates required markup <b>if</b> it is not already present.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu bar.
* @param {String} p_oElement String specifying the id attribute of the
* &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data source <b>for</b> the
* menu bar.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-22445964&quot;&gt;HTMLDivElement&lt;/a&gt;} p_oElement Object specifying
* the &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element of the menu bar.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-94282980&quot;&gt;HTMLSelectElement&lt;/a&gt;} p_oElement Object
* specifying the &lt;code&gt;&amp;#60;select&amp;#62;&lt;/code&gt; element to be used as the data
* source <b>for</b> the menu bar.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu bar. See configuration class documentation <b>for</b>
* more details.
*/</i>
init: <b>function</b>(p_oElement, p_oConfig) {

    <b>if</b>(!<b>this</b>.ITEM_TYPE) {

        <b>this</b>.ITEM_TYPE = YAHOO.widget.MenuBarItem;

    }

    <i>// Call the init of the superclass (YAHOO.widget.Menu)</i>

    YAHOO.widget.MenuBar.superclass.init.call(<b>this</b>, p_oElement);

    <b>this</b>.beforeInitEvent.fire(YAHOO.widget.MenuBar);

    <b>if</b>(p_oConfig) {

        <b>this</b>.cfg.applyConfig(p_oConfig, true);

    }

    <b>this</b>.initEvent.fire(YAHOO.widget.MenuBar);

},

<i>// Constants</i>

<i>/**
* @property CSS_CLASS_NAME
* @description String representing the CSS class(es) to be applied to the menu
* bar's &lt;code&gt;&amp;#60;div&amp;#62;&lt;/code&gt; element.
* @<b>default</b> &quot;yuimenubar&quot;
* @final
* @type String
*/</i>
CSS_CLASS_NAME: &quot;yuimenubar&quot;,

<i>// Protected event handlers</i>

<i>/**
* @method _onKeyDown
* @description &quot;keydown&quot; Custom Event handler <b>for</b> the menu bar.
* @private
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.MenuBar} p_oMenuBar Object representing the menu bar
* that fired the event.
*/</i>
_onKeyDown: <b>function</b>(p_sType, p_aArgs, p_oMenuBar) {

    <b>var</b> Event = YAHOO.util.Event;
    <b>var</b> oEvent = p_aArgs[0];
    <b>var</b> oItem = p_aArgs[1];
    <b>var</b> oItemCfg = oItem.cfg;
    <b>var</b> oSubmenu;

    <b>switch</b>(oEvent.keyCode) {

        <b>case</b> 27:    <i>// Esc key</i>

            <b>if</b>(this.cfg.getProperty(&quot;position&quot;) == &quot;dynamic&quot;) {

                <b>this</b>.hide();

                <b>if</b>(this.parent) {

                    <b>this</b>.parent.focus();

                }

            }
            <b>else</b> if(<b>this</b>.activeItem) {

                oSubmenu = <b>this</b>.activeItem.cfg.getProperty(&quot;submenu&quot;);

                <b>if</b>(oSubmenu &amp;&amp; oSubmenu.cfg.getProperty(&quot;visible&quot;)) {

                    oSubmenu.hide();
                    <b>this</b>.activeItem.focus();

                }
                <b>else</b> {

                    <b>this</b>.activeItem.cfg.setProperty(&quot;selected&quot;, false);
                    <b>this</b>.activeItem.blur();

                }

            }


            Event.preventDefault(oEvent);

        <b>break</b>;

        <b>case</b> 37:    <i>// Left arrow</i>
        <b>case</b> 39:    <i>// Right arrow</i>

            <b>if</b>(
                oItem == <b>this</b>.activeItem &amp;&amp;
                !oItemCfg.getProperty(&quot;selected&quot;)
            ) {

                oItemCfg.setProperty(&quot;selected&quot;, true);

            }
            <b>else</b> {

                <b>var</b> oNextItem = (oEvent.keyCode == 37) ?
                        oItem.getPreviousEnabledSibling() :
                        oItem.getNextEnabledSibling();

                <b>if</b>(oNextItem) {

                    <b>this</b>.clearActiveItem();

                    oNextItem.cfg.setProperty(&quot;selected&quot;, true);

                    <b>if</b>(this.cfg.getProperty(&quot;autosubmenudisplay&quot;)) {

                        oSubmenu = oNextItem.cfg.getProperty(&quot;submenu&quot;);

                        <b>if</b>(oSubmenu) {

                            oSubmenu.show();
                            oSubmenu.activeItem.blur();
                            oSubmenu.activeItem = null;

                        }

                    }

                    oNextItem.focus();

                }

            }

            Event.preventDefault(oEvent);

        <b>break</b>;

        <b>case</b> 40:    <i>// Down arrow</i>

            <b>if</b>(this.activeItem != oItem) {

                <b>this</b>.clearActiveItem();

                oItemCfg.setProperty(&quot;selected&quot;, true);
                oItem.focus();

            }

            oSubmenu = oItemCfg.getProperty(&quot;submenu&quot;);

            <b>if</b>(oSubmenu) {

                <b>if</b>(oSubmenu.cfg.getProperty(&quot;visible&quot;)) {

                    oSubmenu.setInitialSelection();
                    oSubmenu.setInitialFocus();

                }
                <b>else</b> {

                    oSubmenu.show();

                }

            }

            Event.preventDefault(oEvent);

        <b>break</b>;

    }

},

<i>/**
* @method _onClick
* @description &quot;click&quot; event handler <b>for</b> the menu bar.
* @protected
* @param {String} p_sType String representing the name of the event that
* was fired.
* @param {Array} p_aArgs Array of arguments sent when the event was fired.
* @param {YAHOO.widget.MenuBar} p_oMenuBar Object representing the menu bar
* that fired the event.
*/</i>
_onClick: <b>function</b>(p_sType, p_aArgs, p_oMenuBar) {

    YAHOO.widget.MenuBar.superclass._onClick.call(
        <b>this</b>,
        p_sType,
        p_aArgs,
        p_oMenuBar
    );

    <b>var</b> oItem = p_aArgs[1];

    <b>if</b>(oItem) {

        <b>var</b> Event = YAHOO.util.Event;
        <b>var</b> Dom = YAHOO.util.Dom;

        <b>var</b> oEvent = p_aArgs[0];
        <b>var</b> oTarget = Event.getTarget(oEvent);

        <b>var</b> oActiveItem = <b>this</b>.activeItem;
        <b>var</b> oConfig = <b>this</b>.cfg;

        <i>// Hide any other submenus that might be visible</i>

        <b>if</b>(oActiveItem &amp;&amp; oActiveItem != oItem) {

            <b>this</b>.clearActiveItem();

        }


        <i>// Select and focus the current item</i>

        oItem.cfg.setProperty(&quot;selected&quot;, true);
        oItem.focus();


        <i>// Show the submenu <b>for</b> the item</i>

        <b>var</b> oSubmenu = oItem.cfg.getProperty(&quot;submenu&quot;);

        <b>if</b>(oSubmenu &amp;&amp; oTarget != oItem.submenuIndicator) {

            <b>if</b>(oSubmenu.cfg.getProperty(&quot;visible&quot;)) {

                oSubmenu.hide();

            }
            <b>else</b> {

                oSubmenu.show();

            }

        }

    }

},

<i>// Public methods</i>

<i>/**
* @method toString
* @description Returns a string representing the menu bar.
* @<b>return</b> {String}
*/</i>
toString: <b>function</b>() {

    <b>return</b> (&quot;MenuBar &quot; + <b>this</b>.id);

},

<i>/**
* @description Initializes the class's configurable properties which can be
* changed using the menu bar's Config object (&quot;cfg&quot;).
* @method initDefaultConfig
*/</i>
initDefaultConfig: <b>function</b>() {

    YAHOO.widget.MenuBar.superclass.initDefaultConfig.call(<b>this</b>);

    <b>var</b> oConfig = <b>this</b>.cfg;

	<i>// Add configuration properties</i>

    <i>/*
        Set the <b>default</b> value <b>for</b> the &quot;position&quot; configuration property
        to &quot;static&quot; by re-adding the property.
    */</i>
<i>// holder</i>
<i>/**
    * @config position
    * @description String indicating how a menu bar should be positioned on the
    * screen.  Possible values are &quot;static&quot; and &quot;dynamic.&quot;  Static menu bars
    * are visible by <b>default</b> and reside <b>in</b> the normal flow of the document
    * (CSS position: static).  Dynamic menu bars are hidden by <b>default</b>, reside
    * out of the normal flow of the document (CSS position: absolute), and can
    * overlay other elements on the screen.
    * @<b>default</b> static
    * @type String
    */</i>
    oConfig.addProperty(
        &quot;position&quot;,
        {
            value: &quot;static&quot;,
            handler: <b>this</b>.configPosition,
            validator: <b>this</b>._checkPosition,
            supercedes: [&quot;visible&quot;]
        }
    );

    <i>/*
        Set the <b>default</b> value <b>for</b> the &quot;submenualignment&quot; configuration property
        to [&quot;tl&quot;,&quot;bl&quot;] by re-adding the property.
    */</i>
<i>// holder</i>
<i>/**
    * @config submenualignment
    * @description Array defining how submenus should be aligned to their
    * parent menu bar item. The format is: [itemCorner, submenuCorner].
    * @<b>default</b> [&quot;tl&quot;,&quot;bl&quot;]
    * @type Array
    */</i>
    oConfig.addProperty(&quot;submenualignment&quot;, { value: [&quot;tl&quot;,&quot;bl&quot;] } );

    <i>/*
        Change the <b>default</b> value <b>for</b> the &quot;autosubmenudisplay&quot; configuration
        property to &quot;false&quot; by re-adding the property.
    */</i>
<i>// holder</i>
<i>/**
    * @config autosubmenudisplay
    * @description Boolean indicating <b>if</b> submenus are automatically made
    * visible when the user mouses over the menu bar's items.
    * @<b>default</b> false
    * @type Boolean
    */</i>
	oConfig.addProperty(
	   &quot;autosubmenudisplay&quot;,
	   { value: false, validator: oConfig.checkBoolean }
    );

}

}); <i>// END YAHOO.extend</i>

<i>/**
* Creates an item <b>for</b> a menu bar.
*
* @param {String} p_oObject String specifying the text of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu bar item. See configuration class documentation
* <b>for</b> more details.
* @class MenuBarItem
* @constructor
* @extends YAHOO.widget.MenuItem
*/</i>
YAHOO.widget.MenuBarItem = <b>function</b>(p_oObject, p_oConfig) {

    YAHOO.widget.MenuBarItem.superclass.constructor.call(
        <b>this</b>,
        p_oObject,
        p_oConfig
    );

};

YAHOO.extend(YAHOO.widget.MenuBarItem, YAHOO.widget.MenuItem, {

<i>/**
* @method init
* @description The MenuBarItem class's initialization method. This method is
* automatically called by the constructor, and sets up all DOM references <b>for</b>
* pre-existing markup, and creates required markup <b>if</b> it is not already present.
* @param {String} p_oObject String specifying the text of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-74680021&quot;&gt;HTMLLIElement&lt;/a&gt;} p_oObject Object specifying the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-38450247&quot;&gt;HTMLOptGroupElement&lt;/a&gt;} p_oObject Object
* specifying the &lt;code&gt;&amp;#60;optgroup&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {&lt;a href=&quot;http:<i>//www.w3.org/TR/2000/WD-DOM-Level-1-20000929/level-</i>
* one-html.html#ID-70901257&quot;&gt;HTMLOptionElement&lt;/a&gt;} p_oObject Object specifying
* the &lt;code&gt;&amp;#60;option&amp;#62;&lt;/code&gt; element of the menu bar item.
* @param {Object} p_oConfig Optional. Object literal specifying the
* configuration <b>for</b> the menu bar item. See configuration class documentation
* <b>for</b> more details.
*/</i>
init: <b>function</b>(p_oObject, p_oConfig) {

    <b>if</b>(!<b>this</b>.SUBMENU_TYPE) {

        <b>this</b>.SUBMENU_TYPE = YAHOO.widget.Menu;

    }

    <i>/*
        Call the init of the superclass (YAHOO.widget.MenuItem)
        Note: We don't pass the user config <b>in</b> here yet
        because we only want it executed once, at the lowest
        subclass level.
    */</i>

    YAHOO.widget.MenuBarItem.superclass.init.call(<b>this</b>, p_oObject);

    <b>var</b> oConfig = <b>this</b>.cfg;

    <b>if</b>(p_oConfig) {

        oConfig.applyConfig(p_oConfig, true);

    }

    oConfig.fireQueue();

},

<i>// Constants</i>

<i>/**
* @property CSS_CLASS_NAME
* @description String representing the CSS class(es) to be applied to the
* &lt;code&gt;&amp;#60;li&amp;#62;&lt;/code&gt; element of the menu bar item.
* @<b>default</b> &quot;yuimenubaritem&quot;
* @final
* @type String
*/</i>
CSS_CLASS_NAME: &quot;yuimenubaritem&quot;,

<i>/**
* @property SUBMENU_INDICATOR_IMAGE_PATH
* @description String representing the path to the image to be used <b>for</b> the
* menu bar item's submenu arrow indicator.
* @<b>default</b> &quot;nt/ic/ut/alt1/menuarodwn8_nrm_1.gif&quot;
* @final
* @type String
*/</i>
SUBMENU_INDICATOR_IMAGE_PATH: &quot;nt/ic/ut/alt1/menuarodwn8_nrm_1.gif&quot;,

<i>/**
* @property SELECTED_SUBMENU_INDICATOR_IMAGE_PATH
* @description String representing the path to the image to be used <b>for</b> the
* submenu arrow indicator when the menu bar item is selected.
* @<b>default</b> &quot;nt/ic/ut/alt1/menuarodwn8_hov_1.gif&quot;
* @final
* @type String
*/</i>
SELECTED_SUBMENU_INDICATOR_IMAGE_PATH: &quot;nt/ic/ut/alt1/menuarodwn8_hov_1.gif&quot;,

<i>/**
* @property DISABLED_SUBMENU_INDICATOR_IMAGE_PATH
* @description String representing the path to the image to be used <b>for</b> the
* submenu arrow indicator when the menu bar item is disabled.
* @<b>default</b> &quot;nt/ic/ut/alt1/menuarodwn8_dim_1.gif&quot;
* @final
* @type String
*/</i>
DISABLED_SUBMENU_INDICATOR_IMAGE_PATH: &quot;nt/ic/ut/alt1/menuarodwn8_dim_1.gif&quot;,

<i>// Public methods</i>

<i>/**
* @method toString
* @description Returns a string representing the menu bar item.
* @<b>return</b> {String}
*/</i>
toString: <b>function</b>() {

    <b>return</b> (&quot;MenuBarItem: &quot; + <b>this</b>.cfg.getProperty(&quot;text&quot;));

}

}); // END YAHOO.extend</code></pre><hr><div style="font-size:10px;text-align:center;color:gray;">yui-ext - Copyright &copy; 2006 Jack Slocum.  |
    Yahoo! UI - Copyright &copy; 2006 Yahoo! Inc.<br />All rights reserved.</div>
    </body></html>